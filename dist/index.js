import e,{Component as t}from"react";import{connect as r}from"react-redux";import{Link as n,Redirect as a}from"react-router-dom";import{Field as o,reduxForm as s,stopSubmit as i,getFormSubmitErrors as c}from"redux-form";import{LoadingButton as u}from"sm-react-common-loader";function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(r,!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?y(e):t}var A="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function w(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function S(e,t){return e(t={exports:{}},t.exports),t.exports}var _=S((function(e){!function(t){var r,n=Object.prototype,a=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",u=t.regeneratorRuntime;if(u)e.exports=u;else{(u=t.regeneratorRuntime=e.exports).wrap=v;var l="suspendedStart",p="suspendedYield",f="executing",m="completed",d={},h={};h[s]=function(){return this};var E=Object.getPrototypeOf,g=E&&E(E(N([])));g&&g!==n&&a.call(g,s)&&(h=g);var T=w.prototype=b.prototype=Object.create(h);A.prototype=T.constructor=w,w.constructor=A,w[c]=A.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===A||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(T),e},u.awrap=function(e){return{__await:e}},S(_.prototype),_.prototype[i]=function(){return this},u.AsyncIterator=_,u.async=function(e,t,r,n){var a=new _(v(e,t,r,n));return u.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(T),T[c]="Generator",T[s]=function(){return this},T.toString=function(){return"[object Generator]"},u.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},u.values=N,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=r),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var c=a.call(s,"catchLoc"),u=a.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;P(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),d}}}function v(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,o=Object.create(a.prototype),s=new x(n||[]);return o._invoke=function(e,t,r){var n=l;return function(a,o){if(n===f)throw new Error("Generator is already running");if(n===m){if("throw"===a)throw o;return L()}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var i=R(s,r);if(i){if(i===d)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var c=y(e,t,r);if("normal"===c.type){if(n=r.done?m:p,c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=m,r.method="throw",r.arg=c.arg)}}}(e,r,s),o}function y(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function b(){}function A(){}function w(){}function S(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function _(e){var t;this._invoke=function(r,n){function o(){return new Promise((function(t,o){!function t(r,n,o,s){var i=y(e[r],e,n);if("throw"!==i.type){var c=i.arg,u=c.value;return u&&"object"==typeof u&&a.call(u,"__await")?Promise.resolve(u.__await).then((function(e){t("next",e,o,s)}),(function(e){t("throw",e,o,s)})):Promise.resolve(u).then((function(e){c.value=e,o(c)}),s)}s(i.arg)}(r,n,t,o)}))}return t=t?t.then(o,o):o()}}function R(e,t){var n=e.iterator[t.method];if(n===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=r,R(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=y(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function N(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=r,t.done=!0,t};return o.next=o}}return{next:L}}function L(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())})),R=function(){return this}()||Function("return this")(),O=R.regeneratorRuntime&&Object.getOwnPropertyNames(R).indexOf("regeneratorRuntime")>=0,P=O&&R.regeneratorRuntime;R.regeneratorRuntime=void 0;var x=_;if(O)R.regeneratorRuntime=P;else try{delete R.regeneratorRuntime}catch(e){R.regeneratorRuntime=void 0}var N={LOGIN:"LOGIN",CONFIRM_EMAIL:"CONFIRM_EMAIL",CLEAR:"CLEAR",login:function(e,t,r){return{type:N.LOGIN,payload:{login:e,password:t,remember:r}}},confirmEmail:function(e){return{type:N.CONFIRM_EMAIL,payload:{token:e}}},clearConfirmResponse:function(){return{type:N.CLEAR}}},L="_START",k="_SUCCESS",C="_FAIL";var I={loginResponse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.response,a=t.error;switch(r){case N.LOGIN+L:return{loading:!0};case N.LOGIN+C:return{error:a};case N.LOGIN+k:return n;default:return e}}};var M={confirmMail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.response,a=t.error;switch(r){case N.CONFIRM_EMAIL+L:return{loading:!0};case N.CONFIRM_EMAIL+C:return{error:a};case N.CONFIRM_EMAIL+k:return n;case N.CLEAR:return{};default:return e}}},G={CHANGE_PASSWORD:"CHANGE_PASSWORD",changePassword:function(e,t){return{type:G.CHANGE_PASSWORD,payload:{password:e,password_repeat:e,token:t}}}};var j={changePasswordResponse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.response,a=t.error;switch(r){case G.CHANGE_PASSWORD+L:return{loading:!0};case G.CHANGE_PASSWORD+C:return{error:a};case G.CHANGE_PASSWORD+k:return n;default:return e}}},H={RESET_PASSWORD:"RESET_PASSWORD",resetPassword:function(e){return{type:H.RESET_PASSWORD,payload:{email:e}}}};var U={resetPasswordResponse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.response,a=t.error;switch(r){case H.RESET_PASSWORD+L:return{loading:!0};case H.RESET_PASSWORD+C:return{error:a};case H.RESET_PASSWORD+k:return n;default:return e}}},D={CHECK_EMAIL:"CHECK_EMAIL",REGISTER:"REGISTER",CHECK_LOGIN:"CHECK_LOGIN",register:function(e,t,r){return{type:D.REGISTER,payload:{login:e,password:t,email:r}}},checkEmail:function(e){return{type:D.CHECK_EMAIL,payload:{email:e}}},checkLogin:function(e){return{type:D.CHECK_LOGIN,payload:{login:e}}}};var F={registerResponse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.response,a=t.error;switch(r){case D.REGISTER+L:return{loading:!0};case D.REGISTER+C:return{error:a};case D.REGISTER+k:return n;default:return e}}},B={SET_AF_PARAMS:"SET_AF_PARAMS",setParams:function(e,t){return{type:B.SET_AF_PARAMS,payload:{form:e,params:t}}}};var q={afParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;switch(t.error,r){case B.SET_AF_PARAMS:return E({},e,m({},n.form,n.params));default:return e}}},W="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function Y(){}function K(){}K.resetWarningCache=Y;var X=S((function(e){e.exports=function(){function e(e,t,r,n,a,o){if(o!==W){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:K,resetWarningCache:Y};return r.PropTypes=r,r}()}));function V(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var z=V(e),Q=V((function(e,t,r,n){var a=r?r.call(n,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var i=Object.prototype.hasOwnProperty.bind(t),c=0;c<o.length;c++){var u=o[c];if(!i(u))return!1;var l=e[u],p=t[u];if(!1===(a=r?r.call(n,l,p,u):void 0)||void 0===a&&l!==p)return!1}return!0}));function $(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var J=!("undefined"==typeof window||!window.document||!window.document.createElement);var Z=function(t,r,n){if("function"!=typeof t)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof r)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==n&&"function"!=typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(a){if("function"!=typeof a)throw new Error("Expected WrappedComponent to be a React component.");var o,s=[];function i(){o=t(s.map((function(e){return e.props}))),c.canUseDOM?r(o):n&&(o=n(o))}var c=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.peek=function(){return o},n.rewind=function(){if(n.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=o;return o=void 0,s=[],e};var c=n.prototype;return c.shouldComponentUpdate=function(e){return!Q(e,this.props)},c.componentWillMount=function(){s.push(this),i()},c.componentDidUpdate=function(){i()},c.componentWillUnmount=function(){var e=s.indexOf(this);s.splice(e,1),i()},c.render=function(){return z.createElement(a,this.props)},n}(e.Component);return $(c,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(a)+")"),$(c,"canUseDOM",J),c}},ee=Array.isArray,te=Object.keys,re=Object.prototype.hasOwnProperty,ne="undefined"!=typeof Element;var ae=function(e,t){try{return function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){var n,a,o,s=ee(t),i=ee(r);if(s&&i){if((a=t.length)!=r.length)return!1;for(n=a;0!=n--;)if(!e(t[n],r[n]))return!1;return!0}if(s!=i)return!1;var c=t instanceof Date,u=r instanceof Date;if(c!=u)return!1;if(c&&u)return t.getTime()==r.getTime();var l=t instanceof RegExp,p=r instanceof RegExp;if(l!=p)return!1;if(l&&p)return t.toString()==r.toString();var f=te(t);if((a=f.length)!==te(r).length)return!1;for(n=a;0!=n--;)if(!re.call(r,f[n]))return!1;if(ne&&t instanceof Element&&r instanceof Element)return t===r;for(n=a;0!=n--;)if(!("_owner"===(o=f[n])&&t.$$typeof||e(t[o],r[o])))return!1;return!0}return t!=t&&r!=r}(e,t)}catch(e){if(e.message&&e.message.match(/stack|recursion/i)||-2146828260===e.number)return console.warn("Warning: react-fast-compare does not handle circular references.",e.name,e.message),!1;throw e}},oe=Object.getOwnPropertySymbols,se=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/function ce(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var ue=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,n,a=ce(e),o=1;o<arguments.length;o++){for(var s in r=Object(arguments[o]))se.call(r,s)&&(a[s]=r[s]);if(oe){n=oe(r);for(var i=0;i<n.length;i++)ie.call(r,n[i])&&(a[n[i]]=r[n[i]])}}return a},le=S((function(e,t){t.__esModule=!0;t.ATTRIBUTE_NAMES={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"};var r=t.TAG_NAMES={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},n=(t.VALID_TAG_NAMES=Object.keys(r).map((function(e){return r[e]})),t.TAG_PROPERTIES={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src"},t.REACT_TAG_MAP={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"});t.HELMET_PROPS={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},t.HTML_TAG_MAP=Object.keys(n).reduce((function(e,t){return e[n[t]]=t,e}),{}),t.SELF_CLOSING_TAGS=[r.NOSCRIPT,r.SCRIPT,r.STYLE],t.HELMET_ATTRIBUTE="data-react-helmet"}));w(le);le.ATTRIBUTE_NAMES,le.TAG_NAMES,le.VALID_TAG_NAMES,le.TAG_PROPERTIES,le.REACT_TAG_MAP,le.HELMET_PROPS,le.HTML_TAG_MAP,le.SELF_CLOSING_TAGS,le.HELMET_ATTRIBUTE;var pe=S((function(t,r){r.__esModule=!0,r.warn=r.requestAnimationFrame=r.reducePropsToState=r.mapStateOnServer=r.handleClientStateChange=r.convertReactPropstoHtmlAttributes=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=i(e),s=i(ue);function i(e){return e&&e.__esModule?e:{default:e}}var c,u=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!1===t?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},l=function(e){var t=h(e,le.TAG_NAMES.TITLE),r=h(e,le.HELMET_PROPS.TITLE_TEMPLATE);if(r&&t)return r.replace(/%s/g,(function(){return t}));var n=h(e,le.HELMET_PROPS.DEFAULT_TITLE);return t||n||void 0},p=function(e){return h(e,le.HELMET_PROPS.ON_CHANGE_CLIENT_STATE)||function(){}},f=function(e,t){return t.filter((function(t){return void 0!==t[e]})).map((function(t){return t[e]})).reduce((function(e,t){return a({},e,t)}),{})},m=function(e,t){return t.filter((function(e){return void 0!==e[le.TAG_NAMES.BASE]})).map((function(e){return e[le.TAG_NAMES.BASE]})).reverse().reduce((function(t,r){if(!t.length)for(var n=Object.keys(r),a=0;a<n.length;a++){var o=n[a].toLowerCase();if(-1!==e.indexOf(o)&&r[o])return t.concat(r)}return t}),[])},d=function(e,t,r){var a={};return r.filter((function(t){return!!Array.isArray(t[e])||(void 0!==t[e]&&y("Helmet: "+e+' should be of type "Array". Instead found type "'+n(t[e])+'"'),!1)})).map((function(t){return t[e]})).reverse().reduce((function(e,r){var n={};r.filter((function(e){for(var r=void 0,o=Object.keys(e),s=0;s<o.length;s++){var i=o[s],c=i.toLowerCase();-1===t.indexOf(c)||r===le.TAG_PROPERTIES.REL&&"canonical"===e[r].toLowerCase()||c===le.TAG_PROPERTIES.REL&&"stylesheet"===e[c].toLowerCase()||(r=c),-1===t.indexOf(i)||i!==le.TAG_PROPERTIES.INNER_HTML&&i!==le.TAG_PROPERTIES.CSS_TEXT&&i!==le.TAG_PROPERTIES.ITEM_PROP||(r=i)}if(!r||!e[r])return!1;var u=e[r].toLowerCase();return a[r]||(a[r]={}),n[r]||(n[r]={}),!a[r][u]&&(n[r][u]=!0,!0)})).reverse().forEach((function(t){return e.push(t)}));for(var o=Object.keys(n),i=0;i<o.length;i++){var c=o[i],u=(0,s.default)({},a[c],n[c]);a[c]=u}return e}),[]).reverse()},h=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e[r];if(n.hasOwnProperty(t))return n[t]}return null},E=(c=Date.now(),function(e){var t=Date.now();t-c>16?(c=t,e(t)):setTimeout((function(){E(e)}),0)}),g=function(e){return clearTimeout(e)},T="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||E:A.requestAnimationFrame||E,v="undefined"!=typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||g:A.cancelAnimationFrame||g,y=function(e){return console&&"function"==typeof console.warn&&console.warn(e)},b=null,w=function(e,t){var r=e.baseTag,n=e.bodyAttributes,a=e.htmlAttributes,o=e.linkTags,s=e.metaTags,i=e.noscriptTags,c=e.onChangeClientState,u=e.scriptTags,l=e.styleTags,p=e.title,f=e.titleAttributes;R(le.TAG_NAMES.BODY,n),R(le.TAG_NAMES.HTML,a),_(p,f);var m={baseTag:O(le.TAG_NAMES.BASE,r),linkTags:O(le.TAG_NAMES.LINK,o),metaTags:O(le.TAG_NAMES.META,s),noscriptTags:O(le.TAG_NAMES.NOSCRIPT,i),scriptTags:O(le.TAG_NAMES.SCRIPT,u),styleTags:O(le.TAG_NAMES.STYLE,l)},d={},h={};Object.keys(m).forEach((function(e){var t=m[e],r=t.newTags,n=t.oldTags;r.length&&(d[e]=r),n.length&&(h[e]=m[e].oldTags)})),t&&t(),c(e,d,h)},S=function(e){return Array.isArray(e)?e.join(""):e},_=function(e,t){void 0!==e&&document.title!==e&&(document.title=S(e)),R(le.TAG_NAMES.TITLE,t)},R=function(e,t){var r=document.getElementsByTagName(e)[0];if(r){for(var n=r.getAttribute(le.HELMET_ATTRIBUTE),a=n?n.split(","):[],o=[].concat(a),s=Object.keys(t),i=0;i<s.length;i++){var c=s[i],u=t[c]||"";r.getAttribute(c)!==u&&r.setAttribute(c,u),-1===a.indexOf(c)&&a.push(c);var l=o.indexOf(c);-1!==l&&o.splice(l,1)}for(var p=o.length-1;p>=0;p--)r.removeAttribute(o[p]);a.length===o.length?r.removeAttribute(le.HELMET_ATTRIBUTE):r.getAttribute(le.HELMET_ATTRIBUTE)!==s.join(",")&&r.setAttribute(le.HELMET_ATTRIBUTE,s.join(","))}},O=function(e,t){var r=document.head||document.querySelector(le.TAG_NAMES.HEAD),n=r.querySelectorAll(e+"["+le.HELMET_ATTRIBUTE+"]"),a=Array.prototype.slice.call(n),o=[],s=void 0;return t&&t.length&&t.forEach((function(t){var r=document.createElement(e);for(var n in t)if(t.hasOwnProperty(n))if(n===le.TAG_PROPERTIES.INNER_HTML)r.innerHTML=t.innerHTML;else if(n===le.TAG_PROPERTIES.CSS_TEXT)r.styleSheet?r.styleSheet.cssText=t.cssText:r.appendChild(document.createTextNode(t.cssText));else{var i=void 0===t[n]?"":t[n];r.setAttribute(n,i)}r.setAttribute(le.HELMET_ATTRIBUTE,"true"),a.some((function(e,t){return s=t,r.isEqualNode(e)}))?a.splice(s,1):o.push(r)})),a.forEach((function(e){return e.parentNode.removeChild(e)})),o.forEach((function(e){return r.appendChild(e)})),{oldTags:a,newTags:o}},P=function(e){return Object.keys(e).reduce((function(t,r){var n=void 0!==e[r]?r+'="'+e[r]+'"':""+r;return t?t+" "+n:n}),"")},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,r){return t[le.REACT_TAG_MAP[r]||r]=e[r],t}),t)},N=function(e,t,r){switch(e){case le.TAG_NAMES.TITLE:return{toComponent:function(){return e=t.title,r=t.titleAttributes,(n={key:e})[le.HELMET_ATTRIBUTE]=!0,a=x(r,n),[o.default.createElement(le.TAG_NAMES.TITLE,a,e)];var e,r,n,a},toString:function(){return function(e,t,r,n){var a=P(r),o=S(t);return a?"<"+e+" "+le.HELMET_ATTRIBUTE+'="true" '+a+">"+u(o,n)+"</"+e+">":"<"+e+" "+le.HELMET_ATTRIBUTE+'="true">'+u(o,n)+"</"+e+">"}(e,t.title,t.titleAttributes,r)}};case le.ATTRIBUTE_NAMES.BODY:case le.ATTRIBUTE_NAMES.HTML:return{toComponent:function(){return x(t)},toString:function(){return P(t)}};default:return{toComponent:function(){return function(e,t){return t.map((function(t,r){var n,a=((n={key:r})[le.HELMET_ATTRIBUTE]=!0,n);return Object.keys(t).forEach((function(e){var r=le.REACT_TAG_MAP[e]||e;if(r===le.TAG_PROPERTIES.INNER_HTML||r===le.TAG_PROPERTIES.CSS_TEXT){var n=t.innerHTML||t.cssText;a.dangerouslySetInnerHTML={__html:n}}else a[r]=t[e]})),o.default.createElement(e,a)}))}(e,t)},toString:function(){return function(e,t,r){return t.reduce((function(t,n){var a=Object.keys(n).filter((function(e){return!(e===le.TAG_PROPERTIES.INNER_HTML||e===le.TAG_PROPERTIES.CSS_TEXT)})).reduce((function(e,t){var a=void 0===n[t]?t:t+'="'+u(n[t],r)+'"';return e?e+" "+a:a}),""),o=n.innerHTML||n.cssText||"",s=-1===le.SELF_CLOSING_TAGS.indexOf(e);return t+"<"+e+" "+le.HELMET_ATTRIBUTE+'="true" '+a+(s?"/>":">"+o+"</"+e+">")}),"")}(e,t,r)}}}};r.convertReactPropstoHtmlAttributes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,r){return t[le.HTML_TAG_MAP[r]||r]=e[r],t}),t)},r.handleClientStateChange=function(e){b&&v(b),e.defer?b=T((function(){w(e,(function(){b=null}))})):(w(e),b=null)},r.mapStateOnServer=function(e){var t=e.baseTag,r=e.bodyAttributes,n=e.encode,a=e.htmlAttributes,o=e.linkTags,s=e.metaTags,i=e.noscriptTags,c=e.scriptTags,u=e.styleTags,l=e.title,p=void 0===l?"":l,f=e.titleAttributes;return{base:N(le.TAG_NAMES.BASE,t,n),bodyAttributes:N(le.ATTRIBUTE_NAMES.BODY,r,n),htmlAttributes:N(le.ATTRIBUTE_NAMES.HTML,a,n),link:N(le.TAG_NAMES.LINK,o,n),meta:N(le.TAG_NAMES.META,s,n),noscript:N(le.TAG_NAMES.NOSCRIPT,i,n),script:N(le.TAG_NAMES.SCRIPT,c,n),style:N(le.TAG_NAMES.STYLE,u,n),title:N(le.TAG_NAMES.TITLE,{title:p,titleAttributes:f},n)}},r.reducePropsToState=function(e){return{baseTag:m([le.TAG_PROPERTIES.HREF],e),bodyAttributes:f(le.ATTRIBUTE_NAMES.BODY,e),defer:h(e,le.HELMET_PROPS.DEFER),encode:h(e,le.HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:f(le.ATTRIBUTE_NAMES.HTML,e),linkTags:d(le.TAG_NAMES.LINK,[le.TAG_PROPERTIES.REL,le.TAG_PROPERTIES.HREF],e),metaTags:d(le.TAG_NAMES.META,[le.TAG_PROPERTIES.NAME,le.TAG_PROPERTIES.CHARSET,le.TAG_PROPERTIES.HTTPEQUIV,le.TAG_PROPERTIES.PROPERTY,le.TAG_PROPERTIES.ITEM_PROP],e),noscriptTags:d(le.TAG_NAMES.NOSCRIPT,[le.TAG_PROPERTIES.INNER_HTML],e),onChangeClientState:p(e),scriptTags:d(le.TAG_NAMES.SCRIPT,[le.TAG_PROPERTIES.SRC,le.TAG_PROPERTIES.INNER_HTML],e),styleTags:d(le.TAG_NAMES.STYLE,[le.TAG_PROPERTIES.CSS_TEXT],e),title:l(e),titleAttributes:f(le.ATTRIBUTE_NAMES.TITLE,e)}},r.requestAnimationFrame=T,r.warn=y}));w(pe);pe.warn,pe.requestAnimationFrame,pe.reducePropsToState,pe.mapStateOnServer,pe.handleClientStateChange,pe.convertReactPropstoHtmlAttributes;var fe=S((function(t,r){r.__esModule=!0,r.Helmet=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=u(e),s=u(X),i=u(Z),c=u(ae);function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var p=function(e){var t,r;return r=t=function(t){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),r.prototype.shouldComponentUpdate=function(e){return!(0,c.default)(this.props,e)},r.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case le.TAG_NAMES.SCRIPT:case le.TAG_NAMES.NOSCRIPT:return{innerHTML:t};case le.TAG_NAMES.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},r.prototype.flattenArrayTypeChildren=function(e){var t,r=e.child,a=e.arrayTypeChildren,o=e.newChildProps,s=e.nestedChildren;return n({},a,((t={})[r.type]=[].concat(a[r.type]||[],[n({},o,this.mapNestedChildrenToProps(r,s))]),t))},r.prototype.mapObjectTypeChildren=function(e){var t,r,a=e.child,o=e.newProps,s=e.newChildProps,i=e.nestedChildren;switch(a.type){case le.TAG_NAMES.TITLE:return n({},o,((t={})[a.type]=i,t.titleAttributes=n({},s),t));case le.TAG_NAMES.BODY:return n({},o,{bodyAttributes:n({},s)});case le.TAG_NAMES.HTML:return n({},o,{htmlAttributes:n({},s)})}return n({},o,((r={})[a.type]=n({},s),r))},r.prototype.mapArrayTypeChildrenToProps=function(e,t){var r=n({},t);return Object.keys(e).forEach((function(t){var a;r=n({},r,((a={})[t]=e[t],a))})),r},r.prototype.warnOnInvalidChildren=function(e,t){return!0},r.prototype.mapChildrenToProps=function(e,t){var r=this,n={};return o.default.Children.forEach(e,(function(e){if(e&&e.props){var a=e.props,o=a.children,s=l(a,["children"]),i=(0,pe.convertReactPropstoHtmlAttributes)(s);switch(r.warnOnInvalidChildren(e,o),e.type){case le.TAG_NAMES.LINK:case le.TAG_NAMES.META:case le.TAG_NAMES.NOSCRIPT:case le.TAG_NAMES.SCRIPT:case le.TAG_NAMES.STYLE:n=r.flattenArrayTypeChildren({child:e,arrayTypeChildren:n,newChildProps:i,nestedChildren:o});break;default:t=r.mapObjectTypeChildren({child:e,newProps:t,newChildProps:i,nestedChildren:o})}}})),t=this.mapArrayTypeChildrenToProps(n,t)},r.prototype.render=function(){var t=this.props,r=t.children,a=l(t,["children"]),s=n({},a);return r&&(s=this.mapChildrenToProps(r,s)),o.default.createElement(e,s)},a(r,null,[{key:"canUseDOM",set:function(t){e.canUseDOM=t}}]),r}(o.default.Component),t.propTypes={base:s.default.object,bodyAttributes:s.default.object,children:s.default.oneOfType([s.default.arrayOf(s.default.node),s.default.node]),defaultTitle:s.default.string,defer:s.default.bool,encodeSpecialCharacters:s.default.bool,htmlAttributes:s.default.object,link:s.default.arrayOf(s.default.object),meta:s.default.arrayOf(s.default.object),noscript:s.default.arrayOf(s.default.object),onChangeClientState:s.default.func,script:s.default.arrayOf(s.default.object),style:s.default.arrayOf(s.default.object),title:s.default.string,titleAttributes:s.default.object,titleTemplate:s.default.string},t.defaultProps={defer:!0,encodeSpecialCharacters:!0},t.peek=e.peek,t.rewind=function(){var t=e.rewind();return t||(t=(0,pe.mapStateOnServer)({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),t},r}((0,i.default)(pe.reducePropsToState,pe.handleClientStateChange,pe.mapStateOnServer)((function(){return null})));p.renderStatic=p.rewind,r.Helmet=p,r.default=p}));w(fe);var me=fe.Helmet,de=function(t){var r=t.input,n=t.label,a=t.type,o=t.hint,s=t.meta,i=s.touched,c=s.error,u=s.warning;return e.createElement("div",{className:"form-group has-feedback "+(i&&c?"has-error":"")},e.createElement("label",null,n),e.createElement("input",d({},r,{placeholder:n,type:a,className:"form-control"})),e.createElement("span",{className:"glyphicon glyphicon-".concat("login"===r.name?"envelope":"lock"," form-control-feedback")}),e.createElement("span",{className:"help-block"},o),i&&(c&&e.createElement("span",{className:"help-block"},c)||u&&e.createElement("span",null,u)))};function he(t){var r=t.loginResponse,n=t.label;return e.createElement(u,{type:"submit",className:"btn btn-primary btn-block btn-flat",loading:r.loading},n)}function Ee(t){var r=t.label;return e.createElement("label",null,e.createElement(o,{name:"remember",component:"input",type:"checkbox",style:{marginRight:"10px"}}),r)}function ge(e){var t=e||location.href.substr(1),r={};return t.split("?").forEach((function(e){var t=e.split("=");r[t[0]]=decodeURIComponent(t[1])})),r}de.propTypes={input:X.object,label:X.string,type:X.string,hint:X.string,meta:X.object},he.propTypes={label:X.node,loginResponse:X.object},he.defaultProps={label:"Войти",loginResponse:{loading:!1}},Ee.propTypes={label:X.string},Ee.defaultProps={label:"Запомнить меня"};var Te=B.setParams,ve=N.login,ye=N.confirmEmail,be=N.clearConfirmResponse,Ae=function(r){function a(){var e,t;l(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return m(y(t=b(this,(e=T(a)).call.apply(e,[this].concat(n)))),"handleSubmit",(function(e){t.props.login(e.login,e.password,e.remember)})),t}return g(a,t),f(a,[{key:"componentDidMount",value:function(){this.props.setParams("auth-forms-login",{confirmEmailUrl:this.props.confirmEmailUrl,url:this.props.url});var e=ge().token;e&&(console.log("confirm"),this.props.confirmEmail(e))}},{key:"render",value:function(){var t=this.props,r=t.fields,a=r.loginLabel,s=r.passwordLabel,i=t.response,c=t.title,u=t.description,l=t.resetLink,p=t.registration,f=t.confirmMailResponse,m=f.error&&f.error.message?e.createElement("p",{className:"alert alert-danger"},f.error.message):null,d=f.message?e.createElement("p",{className:"alert alert-success"},f.message):null;return e.createElement("div",{className:"login-box"},e.createElement(me,null,e.createElement("title",null,"Войти")),e.createElement("div",{className:"login-logo"},e.createElement(n,{to:"/",dangerouslySetInnerHTML:{__html:c}})),e.createElement("div",{className:"login-box-body"},m,d,e.createElement("p",{className:"login-box-msg"},u),e.createElement("form",{onSubmit:this.props.handleSubmit(this.handleSubmit)},e.createElement(o,{name:"login",component:de,type:"text",label:a}),e.createElement(o,{name:"password",component:de,type:"password",label:s}),e.createElement("div",{className:"row"},e.createElement("div",{className:"col-xs-8"},e.createElement("div",{className:"checkbox icheck"}),e.createElement(Ee,null)),e.createElement("div",{className:"col-xs-4"},e.createElement(he,{loginResponse:i,label:"Войти"})))),e.createElement(n,{to:l.link},l.label),e.createElement("br",null),e.createElement(n,{to:p.link,className:"text-center"},p.label)))}}]),a}();Ae.propTypes={handleSubmit:X.func,handleLogin:X.func,login:X.func,setParams:X.func,loginResponse:X.object,confirmResponse:X.object,fields:X.object,resetLink:X.shape({link:X.string,label:X.string}),registration:X.shape({link:X.string,label:X.string}),title:X.string,description:X.string,confirmEmail:X.func,confirmEmailUrl:X.string.isRequired,url:X.string.isRequired},Ae.defaultProps={fields:{loginLabel:"Имя пользователя/e-mail",passwordLabel:"Пароль"},registration:{link:"/auth/signup",label:"Регистрация"},resetLink:{link:"/auth/reset_password",label:"Я забыл пароль"}},Ae=s({form:"auth-forms-login",validate:function(e){var t={};return e.login||(t.login="Введите логин"),e.password||(t.password="Введите пароль"),t}})(Ae);var we=r((function(e){return{response:e.loginResponse,confirmMailResponse:e.confirmMail}}),{login:ve,confirmEmail:ye,clearConfirmResponse:be,setParams:Te})(Ae),Se=B.setParams,_e=H.resetPassword;function Re(e){return e&&/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)}var Oe=function(r){function a(){var e,t;l(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return m(y(t=b(this,(e=T(a)).call.apply(e,[this].concat(n)))),"handleSubmit",(function(e){t.props.resetPassword(e.email)})),t}return g(a,t),f(a,[{key:"componentDidMount",value:function(){this.props.setParams("auth-forms-reset_password",{url:this.props.url})}},{key:"render",value:function(){var t=this.props,r=t.title,a=t.description,s=t.next,i=t.login,c=t.registration,l=t.fields,p=t.response;return e.createElement("div",{className:"login-box"},e.createElement(me,null,e.createElement("title",null,"Сброс пароля")),e.createElement("div",{className:"login-logo"},r),e.createElement("div",{className:"login-box-body"},p.message?e.createElement("div",null,e.createElement("p",{className:"login-box-msg"},p.message),e.createElement("div",{style:{textAlign:"center"}},e.createElement(n,{to:"/auth/login",className:"text-center"},i))):e.createElement("div",null,e.createElement("p",{className:"login-box-msg"},a),e.createElement("form",{onSubmit:this.props.handleSubmit(this.handleSubmit)},e.createElement("div",{className:"form-group has-feedback"},e.createElement(o,{name:"email",component:Ie,type:"email",label:l.email})),e.createElement("div",{className:"row"},e.createElement("div",{className:"col-xs-4"},e.createElement(u,{type:"submit",className:"btn btn-primary btn-block btn-flat",loading:p.loading},s)),e.createElement("div",{className:"col-xs-8"},e.createElement("div",{className:"flexbox full-flex"},e.createElement(n,{to:"/auth/login",className:"text-center"},i)),e.createElement("div",{className:"flexbox full-flex"},e.createElement(n,{to:"/auth/signup",className:"text-center"},c))))))))}}]),a}();Oe.propTypes={handleSubmit:X.func.isRequired,resetPassword:X.func.isRequired,response:X.object,fields:X.object,description:X.string,title:X.string.isRequired,url:X.string.isRequired,next:X.string,login:X.string,registration:X.string},Oe.defaultProps={description:"Введите e-mail, мы пришлем Вам на почту инструкцию по смене пароля",next:"Далее",login:"Войти",registration:"Регистрация",fields:{email:"E-mail"}};var Pe=s({form:"auth-forms-reset_password",validate:function(e){var t={};return e.email&&Re(e.email)||(t.email="некорректный e-mail"),t}})(r((function(e){return{response:e.resetPasswordResponse}}),{resetPassword:_e,setParams:Se})(Oe)),xe=B.setParams,Ne=D.register,Le=D.checkEmail,ke=D.checkLogin,Ce=function(e){switch(e){case"name":return"user";case"email":return"envelope";case"password":return"lock";case"repeat_password":return"log-in";default:return""}},Ie=function(t){var r=t.input,n=t.label,a=t.type,o=t.hint,s=t.meta,i=s.touched,c=s.error,u=s.warning;return e.createElement("div",{className:"form-group has-feedback "+(i&&c?"has-error":"")},e.createElement("label",null,n),e.createElement("input",d({},r,{placeholder:n,type:a,className:"form-control"})),e.createElement("span",{className:"glyphicon glyphicon-".concat(Ce(r.name)," form-control-feedback")}),e.createElement("span",{className:"help-block"},o),i&&(c&&e.createElement("span",{className:"help-block"},c)||u&&e.createElement("span",null,u)))};Ie.propTypes={input:X.object,label:X.string,type:X.string,hint:X.string,meta:X.object};var Me=function(r){function a(){var e,t;l(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return m(y(t=b(this,(e=T(a)).call.apply(e,[this].concat(n)))),"handleSubmit",(function(e){t.props.register(e.name,e.password,e.email)})),m(y(t),"handleNameBlur",(function(e){var r=e.nativeEvent.target.value;r&&t.props.checkLogin(r)})),m(y(t),"handleEmailBlur",(function(e){var r=e.nativeEvent.target.value;r&&t.props.checkEmail(r)})),t}return g(a,t),f(a,[{key:"componentDidMount",value:function(){this.props.setParams("auth-forms-register",{url:this.props.url,checkEmailUrl:this.props.checkEmailUrl,checkLoginUrl:this.props.checkLoginUrl})}},{key:"render",value:function(){var t=this.props,r=t.title,a=t.description,s=t.fields,i=s.name,c=s.email,u=s.password,l=s.repeat,p=t.hints,f=p.nameHint,m=p.emailHint,d=p.passwordHint,h=p.repeatHint,E=t.allreadyHaveAccount,g=t.next;return e.createElement("div",{className:"login-box"},e.createElement(me,null,e.createElement("title",null,"Регистрация")),e.createElement("div",{className:"login-logo"},e.createElement(n,{to:"/",dangerouslySetInnerHTML:{__html:r}})),e.createElement("div",{className:"login-box-body"},this.props.response.message?e.createElement("p",{className:"login-box-msg"},this.props.response.message):e.createElement("div",null,e.createElement("p",{className:"login-box-msg"},a),e.createElement("form",{onSubmit:this.props.handleSubmit(this.handleSubmit)},e.createElement("div",{className:"form-group has-feedback"},e.createElement(o,{name:"name",component:Ie,type:"text",hint:f,label:i,onBlur:this.handleNameBlur})),e.createElement("div",{className:"form-group has-feedback"},e.createElement(o,{name:"email",component:Ie,type:"email",hint:m,label:c,onBlur:this.handleEmailBlur})),e.createElement("div",{className:"form-group has-feedback"},e.createElement(o,{name:"password",component:Ie,type:"password",hint:d,label:u})),e.createElement("div",{className:"form-group has-feedback"},e.createElement(o,{name:"repeat_password",component:Ie,type:"password",hint:h,label:l})),e.createElement("div",{className:"row"},e.createElement("div",{className:"col-xs-8"},e.createElement("span",{className:"flexbox",style:{height:"34px",justifyContent:"flex-start"}},e.createElement(n,{to:"/auth/login",className:"text-center"},E))),e.createElement("div",{className:"col-xs-4"},e.createElement("button",{type:"submit",className:"btn btn-primary btn-block btn-flat"},g))),e.createElement("p",{className:"text-red"},this.props.response.message||this.props.response.error)))))}}]),a}();Me.propTypes={response:X.object.isRequired,register:X.func.isRequired,handleSubmit:X.func,checkLogin:X.func,checkEmail:X.func,fields:X.shape({name:X.string,email:X.string,password:X.string,repeat:X.string}),hints:X.shape({nameHint:X.string,emailHint:X.string,passwordHint:X.string,repeatHint:X.string}),title:X.string,description:X.string,allreadyHaveAccount:X.string,next:X.string,checkLoginlUrl:X.string.isRequired,checkEmailUrl:X.string.isRequired,url:X.string.isRequired},Me.defaultProps={description:"Регистрация нового аккаунта",allreadyHaveAccount:"У меня уже есть аккаунт",next:"Далее",fields:{name:"Имя пользователя",email:"E-mail",password:"Пароль",repeat:"Повторите пароль"},hints:{nameHint:"Используйте буквы латинского алфавита",emailHint:"Мы отправим письмо-подтверждение на email",passwordHint:"Минимум 6 символов, латинские символы, без пробелов",repeatHint:""}};var Ge=s({form:"auth-forms-register",validate:function(e){var t={};return e.name||(t.name="введите имя пользователя"),e.email&&Re(e.email)||(t.email="введите e-mail"),(!e.password||e.password&&e.password.length<6)&&(t.password="пароль должен содержать не менее 6-ти символов"),(!e.repeat_password||e.repeat_password&&e.repeat_password.length<6||e.repeat_password&&e.repeat_password!==e.password)&&(t.repeat_password="введенные пароли не совпадают"),t}})(r((function(e){return{response:e.registerResponse}}),{register:Ne,checkEmail:Le,checkLogin:ke,setParams:xe})(Me)),je=B.setParams,He=G.changePassword,Ue=function(r){function s(){var e,t;l(this,s);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return m(y(t=b(this,(e=T(s)).call.apply(e,[this].concat(n)))),"handleSubmit",(function(e){var r=ge().token;r&&e.password===e.repeat_password&&t.props.changePassword(e.password,r)})),t}return g(s,t),f(s,[{key:"componentDidMount",value:function(){this.props.setParams("auth-forms-change_password",{url:this.props.url})}},{key:"render",value:function(){var t=this.props,r=t.response,s=t.token,i=t.next,c=t.description,u=t.registration,l=t.newPasswordLabel,p=t.login,f=t.fields;if(!s)return e.createElement(a,{to:"/"});var m=r.message?e.createElement("p",{className:"text-red"},r.message):null,d=r.error?e.createElement("p",{className:"text-red"},r.error.message):null;return e.createElement("div",{className:"login-box"},e.createElement(me,null,e.createElement("title",null,"Сменить пароль")),e.createElement("div",{className:"login-logo"},l),e.createElement("div",{className:"login-box-body"},this.props.response.message&&"success"===this.props.response.status?e.createElement("p",{className:"login-box-msg"},this.props.response.message,".  ",e.createElement(n,{to:"/user/default/login",className:"text-center"},"Войти"),"."):e.createElement("div",null,e.createElement("p",{className:"login-box-msg"},c),e.createElement("form",{onSubmit:this.props.handleSubmit(this.handleSubmit)},e.createElement("div",{className:"form-group has-feedback"},e.createElement(o,{name:"password",component:Ie,type:"password",label:f.password}),e.createElement(o,{name:"repeat_password",component:Ie,type:"password",label:f.repeat})),e.createElement("div",{className:"row"},e.createElement("div",{className:"col-xs-4"},e.createElement("button",{type:"submit",className:"btn btn-primary btn-block btn-flat"},i)),e.createElement("div",{className:"col-xs-8"},e.createElement("div",{className:"flexbox full-flex"},e.createElement(n,{to:"/auth/login",className:"text-center"},p)),e.createElement("div",{className:"flexbox full-flex"},e.createElement(n,{to:"/auth/signup",className:"text-center"},u))))),m,d)))}}]),s}();Ue.propTypes={response:X.object,handleSubmit:X.func,changePassword:X.func,token:X.string,description:X.string,next:X.string,login:X.string,registration:X.string,newPasswordLabel:X.string,fields:X.shape({password:X.string,repeat:X.string}),url:X.string.isRequired},Ue.defaultProps={description:"Введите и повторите новый пароль",next:"Далее",login:"Войти",registration:"Регистрация",newPasswordLabel:"Новый пароль",fields:{password:"Пароль",repeat:"Повторите пароль"}};var De=r((function(e){return{response:e.changePasswordResponse,token:ge().token}}),{changePassword:He,setParams:je})(s({form:"auth-forms-change_password",validate:function(e){var t={};return(!e.password||e.password&&e.password.length<6)&&(t.password="пароль должен содержать не менее 6-ти символов"),(!e.repeat_password||e.repeat_password&&e.repeat_password.length<6||e.repeat_password!==e.password)&&(t.repeat_password="повторите пароль"),t}})(Ue)),Fe=function(e){return"@@redux-saga/"+e},Be=Fe("IO"),qe=Fe("MULTICAST"),We=function(e){return null==e},Ye=function(e){return null!=e},Ke=function(e){return"function"==typeof e},Xe=function(e){return"string"==typeof e},Ve=Array.isArray,ze=function e(t){return t&&(Xe(t)||Je(t)||Ke(t)||Ve(t)&&t.every(e))},Qe=function(e){return e&&Ke(e.take)&&Ke(e.close)},$e=function(e){return Ke(e)&&e.hasOwnProperty("toString")},Je=function(e){return Boolean(e)&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype},Ze=function(e){return Qe(e)&&e[qe]},et=function(e){return e},tt=function(e){throw e},rt=function(e){return{value:e,done:!0}};var nt="TAKE",at="PUT",ot="ALL",st="CALL",it="FORK",ct="SELECT",ut=function(e,t){var r;return(r={})[Be]=!0,r.combinator=!1,r.type=e,r.payload=t,r};function lt(e,t){return void 0===e&&(e="*"),ze(e)?ut(nt,{pattern:e}):Ze(e)&&Ye(t)&&ze(t)?ut(nt,{channel:e,pattern:t}):Qe(e)?ut(nt,{channel:e}):void 0}function pt(e,t){return We(t)&&(t=e,e=void 0),ut(at,{channel:e,action:t})}function ft(e){var t=ut(ot,e);return t.combinator=!0,t}function mt(e,t){var r,n=null;return Ke(e)?r=e:(Ve(e)?(n=e[0],r=e[1]):(n=e.context,r=e.fn),n&&Xe(r)&&Ke(n[r])&&(r=n[r])),{context:n,fn:r,args:t}}function dt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return ut(st,mt(e,r))}function ht(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return ut(it,mt(e,r))}function Et(e){void 0===e&&(e=et);for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return ut(ct,{selector:e,args:r})}var gt=function(e){return{done:!0,value:e}},Tt={};function vt(e,t,r){var n,a,o,s=t;function i(t,r){if(s===Tt)return gt(t);if(r&&!a)throw s=Tt,r;n&&n(t);var i=r?e[a](r):e[s]();return s=i.nextState,o=i.effect,n=i.stateUpdater,a=i.errorState,s===Tt?gt(t):o}return function(e,t,r){void 0===t&&(t=tt),void 0===r&&(r="iterator");var n={meta:{name:r},next:e,throw:t,return:rt,isSagaIterator:!0};return"undefined"!=typeof Symbol&&(n[Symbol.iterator]=function(){return n}),n}(i,(function(e){return i(null,e)}),r)}function yt(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var o,s={done:!1,value:lt(e)},i=function(e){return o=e};return vt({q1:function(){return{nextState:"q2",effect:s,stateUpdater:i}},q2:function(){return{nextState:"q1",effect:(e=o,{done:!1,value:ht.apply(void 0,[t].concat(n,[e]))})};var e}},"q1","takeEvery("+function(e){return Qe(e)?"channel":$e(e)?String(e):Ke(e)?e.name:String(e)}(e)+", "+t.name+")")}function bt(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return ht.apply(void 0,[yt,e,t].concat(n))}var At="AUTH_REQUEST";function wt(e){return E({},e,{oldType:e.type,type:At})}var St=x.mark(kt),_t=x.mark(Ct),Rt=x.mark(It),Ot=x.mark(Mt),Pt=x.mark(Gt),xt=x.mark(jt),Nt=x.mark(Ht),Lt=function(e){return e.afParams};function kt(e){var t;return x.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Et(Lt);case 2:if((t=r.sent)&&t["auth-forms-login"]){r.next=5;break}return r.abrupt("return",null);case 5:return r.next=7,pt(wt(E({},e,{method:"POST",auth:!0,url:t["auth-forms-login"].url})));case 7:case"end":return r.stop()}}),St)}function Ct(e){var t;return x.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Et(Lt);case 2:return t=r.sent,r.next=5,console.log(e,t,"helo");case 5:if(t&&t["auth-forms-login"]){r.next=7;break}return r.abrupt("return",null);case 7:return r.next=9,pt(wt(E({},e,{method:"POST",auth:!0,url:t["auth-forms-login"].confirmEmailUrl})));case 9:case"end":return r.stop()}}),_t)}function It(e){var t;return x.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.response,!e.error){r.next=5;break}return t={login:e.error.message},r.next=5,pt(i("auth-forms-login",t));case 5:case"end":return r.stop()}}),Rt)}function Mt(e){var t;return x.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,console.log(e);case 2:return t={login:e.error.message},r.next=5,pt(i("auth-forms-login",t));case 5:case"end":return r.stop()}}),Ot)}function Gt(e){var t,r,n,a;return x.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(100!==(t=e.response).serverStatus){o.next=7;break}return r={login:t.message},o.next=5,pt(i("login",r));case 5:o.next=11;break;case 7:n="expires=".concat(new Date(1e3*t.data.exp).toUTCString()),a="domain=".concat("localhost"===location.hostname?"":".").concat(location.hostname),document.cookie="auth_token=".concat(t.data.token,"; ").concat(n,"; ").concat(a,"; path=/"),location.href=location.origin;case 11:case"end":return o.stop()}}),Pt)}function jt(e){var t;return x.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t={login:e.error.message},r.next=3,pt(i("auth-forms-login",t));case 3:case"end":return r.stop()}}),xt)}function Ht(){return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft([bt(N.LOGIN+k,Gt),bt(N.LOGIN+C,jt),bt(N.LOGIN,kt),bt(N.CONFIRM_EMAIL+k,It),bt(N.CONFIRM_EMAIL+C,Mt),bt(N.CONFIRM_EMAIL,Ct)]);case 2:case"end":return e.stop()}}),Nt)}var Ut=x.mark(qt),Dt=x.mark(Wt),Ft=x.mark(Yt),Bt=function(e){return e.afParams};function qt(e){var t;return x.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Et(Bt);case 2:if((t=r.sent)&&t["auth-forms-change_password"]){r.next=5;break}return r.abrupt("return",null);case 5:return r.next=7,pt(wt(E({},e,{method:"POST",auth:!0,url:t["auth-forms-change_password"].url})));case 7:case"end":return r.stop()}}),Ut)}function Wt(e){var t;return x.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.response,!e.error){r.next=5;break}return t={password:e.error.message},r.next=5,pt(i("auth-forms-change_password",t));case 5:case"end":return r.stop()}}),Dt)}function Yt(e){return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft([bt(G.CHANGE_PASSWORD+C,Wt),bt(G.CHANGE_PASSWORD,qt)]);case 2:case"end":return e.stop()}}),Ft)}var Kt=x.mark(Qt),Xt=x.mark($t),Vt=x.mark(Jt),zt=function(e){return e.afParams};function Qt(e){var t;return x.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Et(zt);case 2:if(t=r.sent,console.log(t),t&&t["auth-forms-reset_password"]){r.next=6;break}return r.abrupt("return",null);case 6:return r.next=8,pt(wt(E({},e,{method:"POST",auth:!0,url:t["auth-forms-reset_password"].url})));case 8:case"end":return r.stop()}}),Kt)}function $t(e){var t;return x.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.error){r.next=4;break}return t={email:e.error.message},r.next=4,pt(i("auth-forms-reset_password",t));case 4:case"end":return r.stop()}}),Xt)}function Jt(e){return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft([bt(H.RESET_PASSWORD+C,$t),bt(H.RESET_PASSWORD,Qt)]);case 2:case"end":return e.stop()}}),Vt)}var Zt=x.mark(cr),er=x.mark(ur),tr=x.mark(lr),rr=x.mark(pr),nr=x.mark(fr),ar=x.mark(dr),or=x.mark(hr),sr=x.mark(Er),ir=function(e){return e.afParams};function cr(e){var t;return x.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Et(ir);case 2:if(t=r.sent,console.log(t),t&&t["auth-forms-register"]){r.next=6;break}return r.abrupt("return",null);case 6:return r.next=8,pt(wt(E({},e,{method:"POST",auth:!0,url:t["auth-forms-register"].url})));case 8:case"end":return r.stop()}}),Zt)}function ur(e){var t;return x.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Et(ir);case 2:if(t=r.sent,console.log(t),t&&t["auth-forms-register"]){r.next=6;break}return r.abrupt("return",null);case 6:return r.next=8,pt(wt(E({},e,{method:"GET",auth:!0,url:"".concat(t["auth-forms-register"].checkEmailUrl,"/").concat(e.payload.email)})));case 8:case"end":return r.stop()}}),er)}function lr(e){var t;return x.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Et(ir);case 2:if(t=r.sent,console.log(t),t&&t["auth-forms-register"]){r.next=6;break}return r.abrupt("return",null);case 6:return r.next=8,pt(wt(E({},e,{method:"GET",auth:!0,url:"".concat(t["auth-forms-register"].checkLoginUrl,"/").concat(e.payload.login)})));case 8:case"end":return r.stop()}}),tr)}function pr(e){var t;return x.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.response,!e.error){r.next=5;break}return t={name:e.error.message},r.next=5,pt(i("auth-forms-register",t));case 5:case"end":return r.stop()}}),rr)}function fr(e){var t;return x.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t={name:e.response.error},r.next=3,pt(i("auth-forms-register",t));case 3:case"end":return r.stop()}}),nr)}var mr=function(e){return c("register")(e)};function dr(e){var t,r;return x.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.response,n.next=3,Et(mr);case 3:if(t=n.sent,!e.error){n.next=8;break}return r=E({name:e.error.message},t),n.next=8,pt(i("auth-forms-register",r));case 8:case"end":return n.stop()}}),ar)}function hr(e){var t,r;return x.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.response,n.next=3,Et(mr);case 3:if(t=n.sent,!e.error){n.next=8;break}return r=E({email:e.error.message},t),n.next=8,pt(i("auth-forms-register",r));case 8:case"end":return n.stop()}}),or)}function Er(e){return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft([bt(D.REGISTER+C,fr),bt(D.REGISTER+k,pr),bt(D.REGISTER,cr),bt(D.CHECK_EMAIL+C,hr),bt(D.CHECK_EMAIL,ur),bt(D.CHECK_LOGIN+C,dr),bt(D.CHECK_LOGIN,lr)]);case 2:case"end":return e.stop()}}),sr)}var gr=x.mark(yr),Tr=x.mark(Ar),vr=x.mark(wr);function yr(e){var t,r,n,a,o,s,i,c,u,l,p,f,m;return x.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,console.log("sdfdsf");case 2:return t=e.payload,r=e.method,n=e.url,a=e.auth,o=e.oldType,e.token_is_active,d.next=5,Et((function(e){return e.afOrigin}));case 5:return s=d.sent,console.log(e),i="cef506b12fd189faf83b95c2af29d6c6",d.prev=8,d.next=11,pt(E({},e,{type:o+L}));case 11:return c=t?JSON.stringify(t):"",u=new Headers({"Content-Type":"application/json"}),a&&u.set("Authorization","Bearer "+i),l={method:r,headers:u,mode:"cors"},c&&"GET"!==r&&(l.body=c),d.next=18,dt(fetch,s+n,l);case 18:return p=d.sent,d.next=21,p.json();case 21:if(f=d.sent,200===p.status&&(200!==p.status||100!==f.status)){d.next=28;break}return m=br(p,f),d.next=26,pt(E({},e,{type:o+C,error:m}));case 26:d.next=30;break;case 28:return d.next=30,pt(E({},e,{type:o+k,response:{data:f.response,error:100===f.status||2===f.messages[0].type?f.messages[0].message:null,status:f.status,message:0===f.status||0===f.messages[0].type?f.messages[0].message:null}}));case 30:d.next=35;break;case 32:d.prev=32,d.t0=d.catch(8),console.log(d.t0);case 35:case"end":return d.stop()}}),gr,null,[[8,32]])}var br=function(e,t){return 0===e.status?{message:"Unknow error: check your authorization. No 'Access-Control-Allow-Origin' header is present on the requested resource."}:500===e.status?t:t.messages?t.messages[0]:""};function Ar(){return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t="auth_token",r=void 0,r="localhost"===location.hostname?"localhost":"."+location.hostname,document.cookie=document.cookie="".concat(t,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=").concat(r),location.href=location.origin+"/auth/login";case 3:case"end":return e.stop()}var t,r}),Tr)}function wr(){return x.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ft([bt("LOGOUT",Ar),bt(At,yr),Ht(),Yt(),Jt(),Er()]);case 2:case"end":return e.stop()}}),vr)}var Sr=E({},I,{},M,{},j,{},U,{},F,{},q);export{De as ChangePassword,we as Login,Pe as ResetPassword,Ge as SignUp,N as loginFormActions,Sr as reducer,wr as saga};
