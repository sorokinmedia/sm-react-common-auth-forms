import e,{Component as t}from"react";import{connect as r}from"react-redux";import{Link as n,Redirect as a}from"react-router-dom";import{Field as o,reduxForm as s,stopSubmit as i,getFormSubmitErrors as c}from"redux-form";import{LoadingButton as u}from"sm-react-common-loader";function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(r,!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?y(e):t}var A={LOGIN:"LOGIN",CONFIRM_EMAIL:"CONFIRM_EMAIL",CLEAR:"CLEAR",login:function(e,t,r){return{type:A.LOGIN,payload:{login:e,password:t,remember:r}}},confirmEmail:function(e){return{type:A.CONFIRM_EMAIL,payload:{token:e}}},clearConfirmResponse:function(){return{type:A.CLEAR}}},w="_START",S="_SUCCESS",_="_FAIL";var R={loginResponse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.response,a=t.error;switch(r){case A.LOGIN+w:return{loading:!0};case A.LOGIN+_:return{error:a};case A.LOGIN+S:return n;default:return e}}};var O={confirmMail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.response,a=t.error;switch(r){case A.CONFIRM_EMAIL+w:return{loading:!0};case A.CONFIRM_EMAIL+_:return{error:a};case A.CONFIRM_EMAIL+S:return n;case A.CLEAR:return{};default:return e}}},P={CHANGE_PASSWORD:"CHANGE_PASSWORD",changePassword:function(e,t){return{type:P.CHANGE_PASSWORD,payload:{password:e,password_repeat:e,token:t}}}};var x={changePasswordResponse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.response,a=t.error;switch(r){case P.CHANGE_PASSWORD+w:return{loading:!0};case P.CHANGE_PASSWORD+_:return{error:a};case P.CHANGE_PASSWORD+S:return n;default:return e}}},N={RESET_PASSWORD:"RESET_PASSWORD",resetPassword:function(e){return{type:N.RESET_PASSWORD,payload:{email:e}}}};var L={resetPasswordResponse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.response,a=t.error;switch(r){case N.RESET_PASSWORD+w:return{loading:!0};case N.RESET_PASSWORD+_:return{error:a};case N.RESET_PASSWORD+S:return n;default:return e}}},k={CHECK_EMAIL:"CHECK_EMAIL",REGISTER:"REGISTER",CHECK_LOGIN:"CHECK_LOGIN",register:function(e,t,r){return{type:k.REGISTER,payload:{login:e,password:t,email:r}}},checkEmail:function(e){return{type:k.CHECK_EMAIL,payload:{email:e}}},checkLogin:function(e){return{type:k.CHECK_LOGIN,payload:{login:e}}}};var C={registerResponse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.response,a=t.error;switch(r){case k.REGISTER+w:return{loading:!0};case k.REGISTER+_:return{error:a};case k.REGISTER+S:return n;default:return e}}},I={SET_AF_PARAMS:"SET_AF_PARAMS",setParams:function(e,t){return{type:I.SET_AF_PARAMS,payload:{form:e,params:t}}}};var M={afParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;switch(t.error,r){case I.SET_AF_PARAMS:return E({},e,m({},n.form,n.params));default:return e}}},G="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function j(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function H(e,t){return e(t={exports:{}},t.exports),t.exports}var U="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function D(){}function F(){}F.resetWarningCache=D;var B=H((function(e){e.exports=function(){function e(e,t,r,n,a,o){if(o!==U){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:F,resetWarningCache:D};return r.PropTypes=r,r}()}));function q(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var W=q(e),Y=q((function(e,t,r,n){var a=r?r.call(n,e,t):void 0;if(void 0!==a)return!!a;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var i=Object.prototype.hasOwnProperty.bind(t),c=0;c<o.length;c++){var u=o[c];if(!i(u))return!1;var l=e[u],p=t[u];if(!1===(a=r?r.call(n,l,p,u):void 0)||void 0===a&&l!==p)return!1}return!0}));function K(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var X=!("undefined"==typeof window||!window.document||!window.document.createElement);var V=function(t,r,n){if("function"!=typeof t)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof r)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==n&&"function"!=typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(a){if("function"!=typeof a)throw new Error("Expected WrappedComponent to be a React component.");var o,s=[];function i(){o=t(s.map((function(e){return e.props}))),c.canUseDOM?r(o):n&&(o=n(o))}var c=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.peek=function(){return o},n.rewind=function(){if(n.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=o;return o=void 0,s=[],e};var c=n.prototype;return c.shouldComponentUpdate=function(e){return!Y(e,this.props)},c.componentWillMount=function(){s.push(this),i()},c.componentDidUpdate=function(){i()},c.componentWillUnmount=function(){var e=s.indexOf(this);s.splice(e,1),i()},c.render=function(){return W.createElement(a,this.props)},n}(e.Component);return K(c,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(a)+")"),K(c,"canUseDOM",X),c}},z=Array.isArray,Q=Object.keys,$=Object.prototype.hasOwnProperty,J="undefined"!=typeof Element;var Z=function(e,t){try{return function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){var n,a,o,s=z(t),i=z(r);if(s&&i){if((a=t.length)!=r.length)return!1;for(n=a;0!=n--;)if(!e(t[n],r[n]))return!1;return!0}if(s!=i)return!1;var c=t instanceof Date,u=r instanceof Date;if(c!=u)return!1;if(c&&u)return t.getTime()==r.getTime();var l=t instanceof RegExp,p=r instanceof RegExp;if(l!=p)return!1;if(l&&p)return t.toString()==r.toString();var f=Q(t);if((a=f.length)!==Q(r).length)return!1;for(n=a;0!=n--;)if(!$.call(r,f[n]))return!1;if(J&&t instanceof Element&&r instanceof Element)return t===r;for(n=a;0!=n--;)if(!("_owner"===(o=f[n])&&t.$$typeof||e(t[o],r[o])))return!1;return!0}return t!=t&&r!=r}(e,t)}catch(e){if(e.message&&e.message.match(/stack|recursion/i)||-2146828260===e.number)return console.warn("Warning: react-fast-compare does not handle circular references.",e.name,e.message),!1;throw e}},ee=Object.getOwnPropertySymbols,te=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/function ne(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var ae=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,n,a=ne(e),o=1;o<arguments.length;o++){for(var s in r=Object(arguments[o]))te.call(r,s)&&(a[s]=r[s]);if(ee){n=ee(r);for(var i=0;i<n.length;i++)re.call(r,n[i])&&(a[n[i]]=r[n[i]])}}return a},oe=H((function(e,t){t.__esModule=!0;t.ATTRIBUTE_NAMES={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"};var r=t.TAG_NAMES={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},n=(t.VALID_TAG_NAMES=Object.keys(r).map((function(e){return r[e]})),t.TAG_PROPERTIES={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src"},t.REACT_TAG_MAP={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"});t.HELMET_PROPS={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},t.HTML_TAG_MAP=Object.keys(n).reduce((function(e,t){return e[n[t]]=t,e}),{}),t.SELF_CLOSING_TAGS=[r.NOSCRIPT,r.SCRIPT,r.STYLE],t.HELMET_ATTRIBUTE="data-react-helmet"}));j(oe);oe.ATTRIBUTE_NAMES,oe.TAG_NAMES,oe.VALID_TAG_NAMES,oe.TAG_PROPERTIES,oe.REACT_TAG_MAP,oe.HELMET_PROPS,oe.HTML_TAG_MAP,oe.SELF_CLOSING_TAGS,oe.HELMET_ATTRIBUTE;var se=H((function(t,r){r.__esModule=!0,r.warn=r.requestAnimationFrame=r.reducePropsToState=r.mapStateOnServer=r.handleClientStateChange=r.convertReactPropstoHtmlAttributes=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o=i(e),s=i(ae);function i(e){return e&&e.__esModule?e:{default:e}}var c,u=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!1===t?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},l=function(e){var t=h(e,oe.TAG_NAMES.TITLE),r=h(e,oe.HELMET_PROPS.TITLE_TEMPLATE);if(r&&t)return r.replace(/%s/g,(function(){return t}));var n=h(e,oe.HELMET_PROPS.DEFAULT_TITLE);return t||n||void 0},p=function(e){return h(e,oe.HELMET_PROPS.ON_CHANGE_CLIENT_STATE)||function(){}},f=function(e,t){return t.filter((function(t){return void 0!==t[e]})).map((function(t){return t[e]})).reduce((function(e,t){return a({},e,t)}),{})},m=function(e,t){return t.filter((function(e){return void 0!==e[oe.TAG_NAMES.BASE]})).map((function(e){return e[oe.TAG_NAMES.BASE]})).reverse().reduce((function(t,r){if(!t.length)for(var n=Object.keys(r),a=0;a<n.length;a++){var o=n[a].toLowerCase();if(-1!==e.indexOf(o)&&r[o])return t.concat(r)}return t}),[])},d=function(e,t,r){var a={};return r.filter((function(t){return!!Array.isArray(t[e])||(void 0!==t[e]&&y("Helmet: "+e+' should be of type "Array". Instead found type "'+n(t[e])+'"'),!1)})).map((function(t){return t[e]})).reverse().reduce((function(e,r){var n={};r.filter((function(e){for(var r=void 0,o=Object.keys(e),s=0;s<o.length;s++){var i=o[s],c=i.toLowerCase();-1===t.indexOf(c)||r===oe.TAG_PROPERTIES.REL&&"canonical"===e[r].toLowerCase()||c===oe.TAG_PROPERTIES.REL&&"stylesheet"===e[c].toLowerCase()||(r=c),-1===t.indexOf(i)||i!==oe.TAG_PROPERTIES.INNER_HTML&&i!==oe.TAG_PROPERTIES.CSS_TEXT&&i!==oe.TAG_PROPERTIES.ITEM_PROP||(r=i)}if(!r||!e[r])return!1;var u=e[r].toLowerCase();return a[r]||(a[r]={}),n[r]||(n[r]={}),!a[r][u]&&(n[r][u]=!0,!0)})).reverse().forEach((function(t){return e.push(t)}));for(var o=Object.keys(n),i=0;i<o.length;i++){var c=o[i],u=(0,s.default)({},a[c],n[c]);a[c]=u}return e}),[]).reverse()},h=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e[r];if(n.hasOwnProperty(t))return n[t]}return null},E=(c=Date.now(),function(e){var t=Date.now();t-c>16?(c=t,e(t)):setTimeout((function(){E(e)}),0)}),g=function(e){return clearTimeout(e)},T="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||E:G.requestAnimationFrame||E,v="undefined"!=typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||g:G.cancelAnimationFrame||g,y=function(e){return console&&"function"==typeof console.warn&&console.warn(e)},b=null,A=function(e,t){var r=e.baseTag,n=e.bodyAttributes,a=e.htmlAttributes,o=e.linkTags,s=e.metaTags,i=e.noscriptTags,c=e.onChangeClientState,u=e.scriptTags,l=e.styleTags,p=e.title,f=e.titleAttributes;_(oe.TAG_NAMES.BODY,n),_(oe.TAG_NAMES.HTML,a),S(p,f);var m={baseTag:R(oe.TAG_NAMES.BASE,r),linkTags:R(oe.TAG_NAMES.LINK,o),metaTags:R(oe.TAG_NAMES.META,s),noscriptTags:R(oe.TAG_NAMES.NOSCRIPT,i),scriptTags:R(oe.TAG_NAMES.SCRIPT,u),styleTags:R(oe.TAG_NAMES.STYLE,l)},d={},h={};Object.keys(m).forEach((function(e){var t=m[e],r=t.newTags,n=t.oldTags;r.length&&(d[e]=r),n.length&&(h[e]=m[e].oldTags)})),t&&t(),c(e,d,h)},w=function(e){return Array.isArray(e)?e.join(""):e},S=function(e,t){void 0!==e&&document.title!==e&&(document.title=w(e)),_(oe.TAG_NAMES.TITLE,t)},_=function(e,t){var r=document.getElementsByTagName(e)[0];if(r){for(var n=r.getAttribute(oe.HELMET_ATTRIBUTE),a=n?n.split(","):[],o=[].concat(a),s=Object.keys(t),i=0;i<s.length;i++){var c=s[i],u=t[c]||"";r.getAttribute(c)!==u&&r.setAttribute(c,u),-1===a.indexOf(c)&&a.push(c);var l=o.indexOf(c);-1!==l&&o.splice(l,1)}for(var p=o.length-1;p>=0;p--)r.removeAttribute(o[p]);a.length===o.length?r.removeAttribute(oe.HELMET_ATTRIBUTE):r.getAttribute(oe.HELMET_ATTRIBUTE)!==s.join(",")&&r.setAttribute(oe.HELMET_ATTRIBUTE,s.join(","))}},R=function(e,t){var r=document.head||document.querySelector(oe.TAG_NAMES.HEAD),n=r.querySelectorAll(e+"["+oe.HELMET_ATTRIBUTE+"]"),a=Array.prototype.slice.call(n),o=[],s=void 0;return t&&t.length&&t.forEach((function(t){var r=document.createElement(e);for(var n in t)if(t.hasOwnProperty(n))if(n===oe.TAG_PROPERTIES.INNER_HTML)r.innerHTML=t.innerHTML;else if(n===oe.TAG_PROPERTIES.CSS_TEXT)r.styleSheet?r.styleSheet.cssText=t.cssText:r.appendChild(document.createTextNode(t.cssText));else{var i=void 0===t[n]?"":t[n];r.setAttribute(n,i)}r.setAttribute(oe.HELMET_ATTRIBUTE,"true"),a.some((function(e,t){return s=t,r.isEqualNode(e)}))?a.splice(s,1):o.push(r)})),a.forEach((function(e){return e.parentNode.removeChild(e)})),o.forEach((function(e){return r.appendChild(e)})),{oldTags:a,newTags:o}},O=function(e){return Object.keys(e).reduce((function(t,r){var n=void 0!==e[r]?r+'="'+e[r]+'"':""+r;return t?t+" "+n:n}),"")},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,r){return t[oe.REACT_TAG_MAP[r]||r]=e[r],t}),t)},x=function(e,t,r){switch(e){case oe.TAG_NAMES.TITLE:return{toComponent:function(){return e=t.title,r=t.titleAttributes,(n={key:e})[oe.HELMET_ATTRIBUTE]=!0,a=P(r,n),[o.default.createElement(oe.TAG_NAMES.TITLE,a,e)];var e,r,n,a},toString:function(){return function(e,t,r,n){var a=O(r),o=w(t);return a?"<"+e+" "+oe.HELMET_ATTRIBUTE+'="true" '+a+">"+u(o,n)+"</"+e+">":"<"+e+" "+oe.HELMET_ATTRIBUTE+'="true">'+u(o,n)+"</"+e+">"}(e,t.title,t.titleAttributes,r)}};case oe.ATTRIBUTE_NAMES.BODY:case oe.ATTRIBUTE_NAMES.HTML:return{toComponent:function(){return P(t)},toString:function(){return O(t)}};default:return{toComponent:function(){return function(e,t){return t.map((function(t,r){var n,a=((n={key:r})[oe.HELMET_ATTRIBUTE]=!0,n);return Object.keys(t).forEach((function(e){var r=oe.REACT_TAG_MAP[e]||e;if(r===oe.TAG_PROPERTIES.INNER_HTML||r===oe.TAG_PROPERTIES.CSS_TEXT){var n=t.innerHTML||t.cssText;a.dangerouslySetInnerHTML={__html:n}}else a[r]=t[e]})),o.default.createElement(e,a)}))}(e,t)},toString:function(){return function(e,t,r){return t.reduce((function(t,n){var a=Object.keys(n).filter((function(e){return!(e===oe.TAG_PROPERTIES.INNER_HTML||e===oe.TAG_PROPERTIES.CSS_TEXT)})).reduce((function(e,t){var a=void 0===n[t]?t:t+'="'+u(n[t],r)+'"';return e?e+" "+a:a}),""),o=n.innerHTML||n.cssText||"",s=-1===oe.SELF_CLOSING_TAGS.indexOf(e);return t+"<"+e+" "+oe.HELMET_ATTRIBUTE+'="true" '+a+(s?"/>":">"+o+"</"+e+">")}),"")}(e,t,r)}}}};r.convertReactPropstoHtmlAttributes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce((function(t,r){return t[oe.HTML_TAG_MAP[r]||r]=e[r],t}),t)},r.handleClientStateChange=function(e){b&&v(b),e.defer?b=T((function(){A(e,(function(){b=null}))})):(A(e),b=null)},r.mapStateOnServer=function(e){var t=e.baseTag,r=e.bodyAttributes,n=e.encode,a=e.htmlAttributes,o=e.linkTags,s=e.metaTags,i=e.noscriptTags,c=e.scriptTags,u=e.styleTags,l=e.title,p=void 0===l?"":l,f=e.titleAttributes;return{base:x(oe.TAG_NAMES.BASE,t,n),bodyAttributes:x(oe.ATTRIBUTE_NAMES.BODY,r,n),htmlAttributes:x(oe.ATTRIBUTE_NAMES.HTML,a,n),link:x(oe.TAG_NAMES.LINK,o,n),meta:x(oe.TAG_NAMES.META,s,n),noscript:x(oe.TAG_NAMES.NOSCRIPT,i,n),script:x(oe.TAG_NAMES.SCRIPT,c,n),style:x(oe.TAG_NAMES.STYLE,u,n),title:x(oe.TAG_NAMES.TITLE,{title:p,titleAttributes:f},n)}},r.reducePropsToState=function(e){return{baseTag:m([oe.TAG_PROPERTIES.HREF],e),bodyAttributes:f(oe.ATTRIBUTE_NAMES.BODY,e),defer:h(e,oe.HELMET_PROPS.DEFER),encode:h(e,oe.HELMET_PROPS.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:f(oe.ATTRIBUTE_NAMES.HTML,e),linkTags:d(oe.TAG_NAMES.LINK,[oe.TAG_PROPERTIES.REL,oe.TAG_PROPERTIES.HREF],e),metaTags:d(oe.TAG_NAMES.META,[oe.TAG_PROPERTIES.NAME,oe.TAG_PROPERTIES.CHARSET,oe.TAG_PROPERTIES.HTTPEQUIV,oe.TAG_PROPERTIES.PROPERTY,oe.TAG_PROPERTIES.ITEM_PROP],e),noscriptTags:d(oe.TAG_NAMES.NOSCRIPT,[oe.TAG_PROPERTIES.INNER_HTML],e),onChangeClientState:p(e),scriptTags:d(oe.TAG_NAMES.SCRIPT,[oe.TAG_PROPERTIES.SRC,oe.TAG_PROPERTIES.INNER_HTML],e),styleTags:d(oe.TAG_NAMES.STYLE,[oe.TAG_PROPERTIES.CSS_TEXT],e),title:l(e),titleAttributes:f(oe.ATTRIBUTE_NAMES.TITLE,e)}},r.requestAnimationFrame=T,r.warn=y}));j(se);se.warn,se.requestAnimationFrame,se.reducePropsToState,se.mapStateOnServer,se.handleClientStateChange,se.convertReactPropstoHtmlAttributes;var ie=H((function(t,r){r.__esModule=!0,r.Helmet=void 0;var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=u(e),s=u(B),i=u(V),c=u(Z);function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}var p=function(e){var t,r;return r=t=function(t){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,t),r.prototype.shouldComponentUpdate=function(e){return!(0,c.default)(this.props,e)},r.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case oe.TAG_NAMES.SCRIPT:case oe.TAG_NAMES.NOSCRIPT:return{innerHTML:t};case oe.TAG_NAMES.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},r.prototype.flattenArrayTypeChildren=function(e){var t,r=e.child,a=e.arrayTypeChildren,o=e.newChildProps,s=e.nestedChildren;return n({},a,((t={})[r.type]=[].concat(a[r.type]||[],[n({},o,this.mapNestedChildrenToProps(r,s))]),t))},r.prototype.mapObjectTypeChildren=function(e){var t,r,a=e.child,o=e.newProps,s=e.newChildProps,i=e.nestedChildren;switch(a.type){case oe.TAG_NAMES.TITLE:return n({},o,((t={})[a.type]=i,t.titleAttributes=n({},s),t));case oe.TAG_NAMES.BODY:return n({},o,{bodyAttributes:n({},s)});case oe.TAG_NAMES.HTML:return n({},o,{htmlAttributes:n({},s)})}return n({},o,((r={})[a.type]=n({},s),r))},r.prototype.mapArrayTypeChildrenToProps=function(e,t){var r=n({},t);return Object.keys(e).forEach((function(t){var a;r=n({},r,((a={})[t]=e[t],a))})),r},r.prototype.warnOnInvalidChildren=function(e,t){return!0},r.prototype.mapChildrenToProps=function(e,t){var r=this,n={};return o.default.Children.forEach(e,(function(e){if(e&&e.props){var a=e.props,o=a.children,s=l(a,["children"]),i=(0,se.convertReactPropstoHtmlAttributes)(s);switch(r.warnOnInvalidChildren(e,o),e.type){case oe.TAG_NAMES.LINK:case oe.TAG_NAMES.META:case oe.TAG_NAMES.NOSCRIPT:case oe.TAG_NAMES.SCRIPT:case oe.TAG_NAMES.STYLE:n=r.flattenArrayTypeChildren({child:e,arrayTypeChildren:n,newChildProps:i,nestedChildren:o});break;default:t=r.mapObjectTypeChildren({child:e,newProps:t,newChildProps:i,nestedChildren:o})}}})),t=this.mapArrayTypeChildrenToProps(n,t)},r.prototype.render=function(){var t=this.props,r=t.children,a=l(t,["children"]),s=n({},a);return r&&(s=this.mapChildrenToProps(r,s)),o.default.createElement(e,s)},a(r,null,[{key:"canUseDOM",set:function(t){e.canUseDOM=t}}]),r}(o.default.Component),t.propTypes={base:s.default.object,bodyAttributes:s.default.object,children:s.default.oneOfType([s.default.arrayOf(s.default.node),s.default.node]),defaultTitle:s.default.string,defer:s.default.bool,encodeSpecialCharacters:s.default.bool,htmlAttributes:s.default.object,link:s.default.arrayOf(s.default.object),meta:s.default.arrayOf(s.default.object),noscript:s.default.arrayOf(s.default.object),onChangeClientState:s.default.func,script:s.default.arrayOf(s.default.object),style:s.default.arrayOf(s.default.object),title:s.default.string,titleAttributes:s.default.object,titleTemplate:s.default.string},t.defaultProps={defer:!0,encodeSpecialCharacters:!0},t.peek=e.peek,t.rewind=function(){var t=e.rewind();return t||(t=(0,se.mapStateOnServer)({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),t},r}((0,i.default)(se.reducePropsToState,se.handleClientStateChange,se.mapStateOnServer)((function(){return null})));p.renderStatic=p.rewind,r.Helmet=p,r.default=p}));j(ie);var ce=ie.Helmet,ue=function(t){var r=t.input,n=t.label,a=t.type,o=t.hint,s=t.meta,i=s.touched,c=s.error,u=s.warning;return e.createElement("div",{className:"form-group has-feedback "+(i&&c?"has-error":"")},e.createElement("label",null,n),e.createElement("input",d({},r,{placeholder:n,type:a,className:"form-control"})),e.createElement("span",{className:"glyphicon glyphicon-".concat("login"===r.name?"envelope":"lock"," form-control-feedback")}),e.createElement("span",{className:"help-block"},o),i&&(c&&e.createElement("span",{className:"help-block"},c)||u&&e.createElement("span",null,u)))};function le(t){var r=t.loginResponse,n=t.label;return e.createElement(u,{type:"submit",className:"btn btn-primary btn-block btn-flat",loading:r.loading},n)}function pe(t){var r=t.label;return e.createElement("label",null,e.createElement(o,{name:"remember",component:"input",type:"checkbox",style:{marginRight:"10px"}}),r)}function fe(e){var t=e||location.href.substr(1),r={};return t.split("?").forEach((function(e){var t=e.split("=");r[t[0]]=decodeURIComponent(t[1])})),r}ue.propTypes={input:B.object,label:B.string,type:B.string,hint:B.string,meta:B.object},le.propTypes={label:B.node,loginResponse:B.object},le.defaultProps={label:"Войти",loginResponse:{loading:!1}},pe.propTypes={label:B.string},pe.defaultProps={label:"Запомнить меня"};var me=I.setParams,de=A.login,he=A.confirmEmail,Ee=A.clearConfirmResponse,ge=function(r){function a(){var e,t;l(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return m(y(t=b(this,(e=T(a)).call.apply(e,[this].concat(n)))),"handleSubmit",(function(e){t.props.login(e.login,e.password,e.remember)})),t}return g(a,t),f(a,[{key:"componentDidMount",value:function(){this.props.setParams("auth-forms-login",{confirmEmailUrl:this.props.confirmEmailUrl,url:this.props.url});var e=fe().token;e&&(console.log("confirm"),this.props.confirmEmail(e))}},{key:"render",value:function(){var t=this.props,r=t.fields,a=r.loginLabel,s=r.passwordLabel,i=t.response,c=t.title,u=t.description,l=t.resetLink,p=t.registration,f=t.confirmMailResponse,m=f.error&&f.error.message?e.createElement("p",{className:"alert alert-danger"},f.error.message):null,d=f.message?e.createElement("p",{className:"alert alert-success"},f.message):null;return e.createElement("div",{className:"login-box"},e.createElement(ce,null,e.createElement("title",null,"Войти")),e.createElement("div",{className:"login-logo"},e.createElement(n,{to:"/",dangerouslySetInnerHTML:{__html:c}})),e.createElement("div",{className:"login-box-body"},m,d,e.createElement("p",{className:"login-box-msg"},u),e.createElement("form",{onSubmit:this.props.handleSubmit(this.handleSubmit)},e.createElement(o,{name:"login",component:ue,type:"text",label:a}),e.createElement(o,{name:"password",component:ue,type:"password",label:s}),e.createElement("div",{className:"row"},e.createElement("div",{className:"col-xs-8"},e.createElement("div",{className:"checkbox icheck"}),e.createElement(pe,null)),e.createElement("div",{className:"col-xs-4"},e.createElement(le,{loginResponse:i,label:"Войти"})))),e.createElement(n,{to:l.link},l.label),e.createElement("br",null),e.createElement(n,{to:p.link,className:"text-center"},p.label)))}}]),a}();ge.propTypes={handleSubmit:B.func,handleLogin:B.func,login:B.func,setParams:B.func,loginResponse:B.object,confirmResponse:B.object,fields:B.object,resetLink:B.shape({link:B.string,label:B.string}),registration:B.shape({link:B.string,label:B.string}),title:B.string,description:B.string,confirmEmail:B.func,confirmEmailUrl:B.string.isRequired,url:B.string.isRequired},ge.defaultProps={fields:{loginLabel:"Имя пользователя/e-mail",passwordLabel:"Пароль"},registration:{link:"/auth/signup",label:"Регистрация"},resetLink:{link:"/auth/reset_password",label:"Я забыл пароль"}},ge=s({form:"auth-forms-login",validate:function(e){var t={};return e.login||(t.login="Введите логин"),e.password||(t.password="Введите пароль"),t}})(ge);var Te=r((function(e){return{response:e.loginResponse,confirmMailResponse:e.confirmMail}}),{login:de,confirmEmail:he,clearConfirmResponse:Ee,setParams:me})(ge),ve=I.setParams,ye=N.resetPassword;function be(e){return e&&/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)}var Ae=function(r){function a(){var e,t;l(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return m(y(t=b(this,(e=T(a)).call.apply(e,[this].concat(n)))),"handleSubmit",(function(e){t.props.resetPassword(e.email)})),t}return g(a,t),f(a,[{key:"componentDidMount",value:function(){this.props.setParams("auth-forms-reset_password",{url:this.props.url})}},{key:"render",value:function(){var t=this.props,r=t.title,a=t.description,s=t.next,i=t.login,c=t.registration,l=t.fields,p=t.response;return e.createElement("div",{className:"login-box"},e.createElement(ce,null,e.createElement("title",null,"Сброс пароля")),e.createElement("div",{className:"login-logo"},r),e.createElement("div",{className:"login-box-body"},p.message?e.createElement("div",null,e.createElement("p",{className:"login-box-msg"},p.message),e.createElement("div",{style:{textAlign:"center"}},e.createElement(n,{to:"/auth/login",className:"text-center"},i))):e.createElement("div",null,e.createElement("p",{className:"login-box-msg"},a),e.createElement("form",{onSubmit:this.props.handleSubmit(this.handleSubmit)},e.createElement("div",{className:"form-group has-feedback"},e.createElement(o,{name:"email",component:xe,type:"email",label:l.email})),e.createElement("div",{className:"row"},e.createElement("div",{className:"col-xs-4"},e.createElement(u,{type:"submit",className:"btn btn-primary btn-block btn-flat",loading:p.loading},s)),e.createElement("div",{className:"col-xs-8"},e.createElement("div",{className:"flexbox full-flex"},e.createElement(n,{to:"/auth/login",className:"text-center"},i)),e.createElement("div",{className:"flexbox full-flex"},e.createElement(n,{to:"/auth/signup",className:"text-center"},c))))))))}}]),a}();Ae.propTypes={handleSubmit:B.func.isRequired,resetPassword:B.func.isRequired,response:B.object,fields:B.object,description:B.string,title:B.string.isRequired,url:B.string.isRequired,next:B.string,login:B.string,registration:B.string},Ae.defaultProps={description:"Введите e-mail, мы пришлем Вам на почту инструкцию по смене пароля",next:"Далее",login:"Войти",registration:"Регистрация",fields:{email:"E-mail"}};var we=s({form:"auth-forms-reset_password",validate:function(e){var t={};return e.email&&be(e.email)||(t.email="некорректный e-mail"),t}})(r((function(e){return{response:e.resetPasswordResponse}}),{resetPassword:ye,setParams:ve})(Ae)),Se=I.setParams,_e=k.register,Re=k.checkEmail,Oe=k.checkLogin,Pe=function(e){switch(e){case"name":return"user";case"email":return"envelope";case"password":return"lock";case"repeat_password":return"log-in";default:return""}},xe=function(t){var r=t.input,n=t.label,a=t.type,o=t.hint,s=t.meta,i=s.touched,c=s.error,u=s.warning;return e.createElement("div",{className:"form-group has-feedback "+(i&&c?"has-error":"")},e.createElement("label",null,n),e.createElement("input",d({},r,{placeholder:n,type:a,className:"form-control"})),e.createElement("span",{className:"glyphicon glyphicon-".concat(Pe(r.name)," form-control-feedback")}),e.createElement("span",{className:"help-block"},o),i&&(c&&e.createElement("span",{className:"help-block"},c)||u&&e.createElement("span",null,u)))};xe.propTypes={input:B.object,label:B.string,type:B.string,hint:B.string,meta:B.object};var Ne=function(r){function a(e){var t;return l(this,a),m(y(t=b(this,T(a).call(this,e))),"handleSubmit",(function(e){t.props.register(e.name,e.password,e.email),t.setState({registering:!0})})),m(y(t),"handleNameBlur",(function(e){var r=e.nativeEvent.target.value;r&&t.props.checkLogin(r)})),m(y(t),"handleEmailBlur",(function(e){var r=e.nativeEvent.target.value;r&&t.props.checkEmail(r)})),t.state={registering:!1},t}return g(a,t),f(a,[{key:"componentDidMount",value:function(){this.props.setParams("auth-forms-register",{url:this.props.url,checkEmailUrl:this.props.checkEmailUrl,checkLoginUrl:this.props.checkLoginUrl})}},{key:"render",value:function(){var t=this.props,r=t.title,a=t.description,s=t.fields,i=s.name,c=s.email,u=s.password,l=s.repeat,p=t.hints,f=p.nameHint,m=p.emailHint,d=p.passwordHint,h=p.repeatHint,E=t.allreadyHaveAccount,g=t.next;return e.createElement("div",{className:"login-box"},e.createElement(ce,null,e.createElement("title",null,"Регистрация")),e.createElement("div",{className:"login-logo"},e.createElement(n,{to:"/",dangerouslySetInnerHTML:{__html:r}})),e.createElement("div",{className:"login-box-body"},this.props.response.message?e.createElement("p",{className:"login-box-msg"},this.props.response.message):e.createElement("div",null,e.createElement("p",{className:"login-box-msg"},a),e.createElement("form",{onSubmit:this.props.handleSubmit(this.handleSubmit)},e.createElement("div",{className:"form-group has-feedback"},e.createElement(o,{name:"name",component:xe,type:"text",hint:f,label:i,onBlur:this.handleNameBlur})),e.createElement("div",{className:"form-group has-feedback"},e.createElement(o,{name:"email",component:xe,type:"email",hint:m,label:c,onBlur:this.handleEmailBlur})),e.createElement("div",{className:"form-group has-feedback"},e.createElement(o,{name:"password",component:xe,type:"password",hint:d,label:u})),e.createElement("div",{className:"form-group has-feedback"},e.createElement(o,{name:"repeat_password",component:xe,type:"password",hint:h,label:l})),e.createElement("div",{className:"row"},e.createElement("div",{className:"col-xs-8"},e.createElement("span",{className:"flexbox",style:{height:"34px",justifyContent:"flex-start"}},e.createElement(n,{to:"/auth/login",className:"text-center"},E))),e.createElement("div",{className:"col-xs-4"},e.createElement("button",{type:"submit",className:"btn btn-primary btn-block btn-flat",disabled:this.state.registering},g))),e.createElement("p",{className:"text-red"},this.props.response.message||this.props.response.error)))))}}]),a}();Ne.propTypes={response:B.object.isRequired,register:B.func.isRequired,handleSubmit:B.func,checkLogin:B.func,checkEmail:B.func,fields:B.shape({name:B.string,email:B.string,password:B.string,repeat:B.string}),hints:B.shape({nameHint:B.string,emailHint:B.string,passwordHint:B.string,repeatHint:B.string}),title:B.string,description:B.string,allreadyHaveAccount:B.string,next:B.string,checkLoginlUrl:B.string.isRequired,checkEmailUrl:B.string.isRequired,url:B.string.isRequired},Ne.defaultProps={description:"Регистрация нового аккаунта",allreadyHaveAccount:"У меня уже есть аккаунт",next:"Далее",fields:{name:"Имя пользователя",email:"E-mail",password:"Пароль",repeat:"Повторите пароль"},hints:{nameHint:"Используйте буквы латинского алфавита",emailHint:"Мы отправим письмо-подтверждение на email",passwordHint:"Минимум 6 символов, латинские символы, без пробелов",repeatHint:""}};var Le=s({form:"auth-forms-register",validate:function(e){var t={};return e.name||(t.name="введите имя пользователя"),e.email&&be(e.email)||(t.email="введите e-mail"),(!e.password||e.password&&e.password.length<6)&&(t.password="пароль должен содержать не менее 6-ти символов"),(!e.repeat_password||e.repeat_password&&e.repeat_password.length<6||e.repeat_password&&e.repeat_password!==e.password)&&(t.repeat_password="введенные пароли не совпадают"),t}})(r((function(e){return{response:e.registerResponse}}),{register:_e,checkEmail:Re,checkLogin:Oe,setParams:Se})(Ne)),ke=I.setParams,Ce=P.changePassword,Ie=function(r){function s(){var e,t;l(this,s);for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return m(y(t=b(this,(e=T(s)).call.apply(e,[this].concat(n)))),"handleSubmit",(function(e){var r=fe().token;r&&e.password===e.repeat_password&&t.props.changePassword(e.password,r)})),t}return g(s,t),f(s,[{key:"componentDidMount",value:function(){this.props.setParams("auth-forms-change_password",{url:this.props.url})}},{key:"render",value:function(){var t=this.props,r=t.response,s=t.token,i=t.next,c=t.description,u=t.registration,l=t.newPasswordLabel,p=t.login,f=t.fields;if(!s)return e.createElement(a,{to:"/"});var m=r.message?e.createElement("p",{className:"text-red"},r.message):null,d=r.error?e.createElement("p",{className:"text-red"},r.error.message):null;return e.createElement("div",{className:"login-box"},e.createElement(ce,null,e.createElement("title",null,"Сменить пароль")),e.createElement("div",{className:"login-logo"},l),e.createElement("div",{className:"login-box-body"},this.props.response.message&&"success"===this.props.response.status?e.createElement("p",{className:"login-box-msg"},this.props.response.message,".  ",e.createElement(n,{to:"/user/default/login",className:"text-center"},"Войти"),"."):e.createElement("div",null,e.createElement("p",{className:"login-box-msg"},c),e.createElement("form",{onSubmit:this.props.handleSubmit(this.handleSubmit)},e.createElement("div",{className:"form-group has-feedback"},e.createElement(o,{name:"password",component:xe,type:"password",label:f.password}),e.createElement(o,{name:"repeat_password",component:xe,type:"password",label:f.repeat})),e.createElement("div",{className:"row"},e.createElement("div",{className:"col-xs-4"},e.createElement("button",{type:"submit",className:"btn btn-primary btn-block btn-flat"},i)),e.createElement("div",{className:"col-xs-8"},e.createElement("div",{className:"flexbox full-flex"},e.createElement(n,{to:"/auth/login",className:"text-center"},p)),e.createElement("div",{className:"flexbox full-flex"},e.createElement(n,{to:"/auth/signup",className:"text-center"},u))))),m,d)))}}]),s}();Ie.propTypes={response:B.object,handleSubmit:B.func,changePassword:B.func,token:B.string,description:B.string,next:B.string,login:B.string,registration:B.string,newPasswordLabel:B.string,fields:B.shape({password:B.string,repeat:B.string}),url:B.string.isRequired},Ie.defaultProps={description:"Введите и повторите новый пароль",next:"Далее",login:"Войти",registration:"Регистрация",newPasswordLabel:"Новый пароль",fields:{password:"Пароль",repeat:"Повторите пароль"}};var Me=r((function(e){return{response:e.changePasswordResponse,token:fe().token}}),{changePassword:Ce,setParams:ke})(s({form:"auth-forms-change_password",validate:function(e){var t={};return(!e.password||e.password&&e.password.length<6)&&(t.password="пароль должен содержать не менее 6-ти символов"),(!e.repeat_password||e.repeat_password&&e.repeat_password.length<6||e.repeat_password!==e.password)&&(t.repeat_password="повторите пароль"),t}})(Ie)),Ge=function(e){return"@@redux-saga/"+e},je=Ge("IO"),He=Ge("MULTICAST"),Ue=function(e){return null==e},De=function(e){return null!=e},Fe=function(e){return"function"==typeof e},Be=function(e){return"string"==typeof e},qe=Array.isArray,We=function e(t){return t&&(Be(t)||Xe(t)||Fe(t)||qe(t)&&t.every(e))},Ye=function(e){return e&&Fe(e.take)&&Fe(e.close)},Ke=function(e){return Fe(e)&&e.hasOwnProperty("toString")},Xe=function(e){return Boolean(e)&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype},Ve=function(e){return Ye(e)&&e[He]},ze=function(e){return e},Qe=function(e){throw e},$e=function(e){return{value:e,done:!0}};var Je="TAKE",Ze="PUT",et="ALL",tt="CALL",rt="FORK",nt="SELECT",at=function(e,t){var r;return(r={})[je]=!0,r.combinator=!1,r.type=e,r.payload=t,r};function ot(e,t){return void 0===e&&(e="*"),We(e)?at(Je,{pattern:e}):Ve(e)&&De(t)&&We(t)?at(Je,{channel:e,pattern:t}):Ye(e)?at(Je,{channel:e}):void 0}function st(e,t){return Ue(t)&&(t=e,e=void 0),at(Ze,{channel:e,action:t})}function it(e){var t=at(et,e);return t.combinator=!0,t}function ct(e,t){var r,n=null;return Fe(e)?r=e:(qe(e)?(n=e[0],r=e[1]):(n=e.context,r=e.fn),n&&Be(r)&&Fe(n[r])&&(r=n[r])),{context:n,fn:r,args:t}}function ut(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return at(tt,ct(e,r))}function lt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return at(rt,ct(e,r))}function pt(e){void 0===e&&(e=ze);for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return at(nt,{selector:e,args:r})}var ft=function(e){return{done:!0,value:e}},mt={};function dt(e,t,r){var n,a,o,s=t;function i(t,r){if(s===mt)return ft(t);if(r&&!a)throw s=mt,r;n&&n(t);var i=r?e[a](r):e[s]();return s=i.nextState,o=i.effect,n=i.stateUpdater,a=i.errorState,s===mt?ft(t):o}return function(e,t,r){void 0===t&&(t=Qe),void 0===r&&(r="iterator");var n={meta:{name:r},next:e,throw:t,return:$e,isSagaIterator:!0};return"undefined"!=typeof Symbol&&(n[Symbol.iterator]=function(){return n}),n}(i,(function(e){return i(null,e)}),r)}function ht(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var o,s={done:!1,value:ot(e)},i=function(e){return o=e};return dt({q1:function(){return{nextState:"q2",effect:s,stateUpdater:i}},q2:function(){return{nextState:"q1",effect:(e=o,{done:!1,value:lt.apply(void 0,[t].concat(n,[e]))})};var e}},"q1","takeEvery("+function(e){return Ye(e)?"channel":Ke(e)?String(e):Fe(e)?e.name:String(e)}(e)+", "+t.name+")")}function Et(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return lt.apply(void 0,[ht,e,t].concat(n))}var gt=H((function(e){!function(t){var r,n=Object.prototype,a=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag",u=t.regeneratorRuntime;if(u)e.exports=u;else{(u=t.regeneratorRuntime=e.exports).wrap=v;var l="suspendedStart",p="suspendedYield",f="executing",m="completed",d={},h={};h[s]=function(){return this};var E=Object.getPrototypeOf,g=E&&E(E(N([])));g&&g!==n&&a.call(g,s)&&(h=g);var T=w.prototype=b.prototype=Object.create(h);A.prototype=T.constructor=w,w.constructor=A,w[c]=A.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===A||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(T),e},u.awrap=function(e){return{__await:e}},S(_.prototype),_.prototype[i]=function(){return this},u.AsyncIterator=_,u.async=function(e,t,r,n){var a=new _(v(e,t,r,n));return u.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(T),T[c]="Generator",T[s]=function(){return this},T.toString=function(){return"[object Generator]"},u.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},u.values=N,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=r)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,a){return i.type="throw",i.arg=e,t.next=n,a&&(t.method="next",t.arg=r),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var c=a.call(s,"catchLoc"),u=a.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;P(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:N(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=r),d}}}function v(e,t,r,n){var a=t&&t.prototype instanceof b?t:b,o=Object.create(a.prototype),s=new x(n||[]);return o._invoke=function(e,t,r){var n=l;return function(a,o){if(n===f)throw new Error("Generator is already running");if(n===m){if("throw"===a)throw o;return L()}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var i=R(s,r);if(i){if(i===d)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var c=y(e,t,r);if("normal"===c.type){if(n=r.done?m:p,c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=m,r.method="throw",r.arg=c.arg)}}}(e,r,s),o}function y(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function b(){}function A(){}function w(){}function S(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function _(e){var t;this._invoke=function(r,n){function o(){return new Promise((function(t,o){!function t(r,n,o,s){var i=y(e[r],e,n);if("throw"!==i.type){var c=i.arg,u=c.value;return u&&"object"==typeof u&&a.call(u,"__await")?Promise.resolve(u.__await).then((function(e){t("next",e,o,s)}),(function(e){t("throw",e,o,s)})):Promise.resolve(u).then((function(e){c.value=e,o(c)}),s)}s(i.arg)}(r,n,t,o)}))}return t=t?t.then(o,o):o()}}function R(e,t){var n=e.iterator[t.method];if(n===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=r,R(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=y(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var o=a.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=r),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function N(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(a.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=r,t.done=!0,t};return o.next=o}}return{next:L}}function L(){return{value:r,done:!0}}}(function(){return this}()||Function("return this")())})),Tt=function(){return this}()||Function("return this")(),vt=Tt.regeneratorRuntime&&Object.getOwnPropertyNames(Tt).indexOf("regeneratorRuntime")>=0,yt=vt&&Tt.regeneratorRuntime;Tt.regeneratorRuntime=void 0;var bt=gt;if(vt)Tt.regeneratorRuntime=yt;else try{delete Tt.regeneratorRuntime}catch(e){Tt.regeneratorRuntime=void 0}var At="AUTH_REQUEST";function wt(e){return E({},e,{oldType:e.type,type:At})}var St=bt.mark(kt),_t=bt.mark(Ct),Rt=bt.mark(It),Ot=bt.mark(Mt),Pt=bt.mark(Gt),xt=bt.mark(jt),Nt=bt.mark(Ht),Lt=function(e){return e.afParams};function kt(e){var t;return bt.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,pt(Lt);case 2:if((t=r.sent)&&t["auth-forms-login"]){r.next=5;break}return r.abrupt("return",null);case 5:return r.next=7,st(wt(E({},e,{method:"POST",auth:!0,url:t["auth-forms-login"].url})));case 7:case"end":return r.stop()}}),St)}function Ct(e){var t;return bt.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,pt(Lt);case 2:return t=r.sent,r.next=5,console.log(e,t,"helo");case 5:if(t&&t["auth-forms-login"]){r.next=7;break}return r.abrupt("return",null);case 7:return r.next=9,st(wt(E({},e,{method:"POST",auth:!0,url:t["auth-forms-login"].confirmEmailUrl})));case 9:case"end":return r.stop()}}),_t)}function It(e){var t;return bt.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.response,!e.error){r.next=5;break}return t={login:e.error.message},r.next=5,st(i("auth-forms-login",t));case 5:case"end":return r.stop()}}),Rt)}function Mt(e){var t;return bt.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,console.log(e);case 2:return t={login:e.error.message},r.next=5,st(i("auth-forms-login",t));case 5:case"end":return r.stop()}}),Ot)}function Gt(e){var t,r,n,a;return bt.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(100!==(t=e.response).serverStatus){o.next=7;break}return r={login:t.message},o.next=5,st(i("login",r));case 5:o.next=11;break;case 7:n="expires=".concat(new Date(1e3*t.data.exp).toUTCString()),a="domain=".concat("localhost"===location.hostname?"":".").concat(location.hostname),document.cookie="auth_token=".concat(t.data.token,"; ").concat(n,"; ").concat(a,"; path=/"),location.href=location.origin;case 11:case"end":return o.stop()}}),Pt)}function jt(e){var t;return bt.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t={login:e.error.message},r.next=3,st(i("auth-forms-login",t));case 3:case"end":return r.stop()}}),xt)}function Ht(){return bt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it([Et(A.LOGIN+S,Gt),Et(A.LOGIN+_,jt),Et(A.LOGIN,kt),Et(A.CONFIRM_EMAIL+S,It),Et(A.CONFIRM_EMAIL+_,Mt),Et(A.CONFIRM_EMAIL,Ct)]);case 2:case"end":return e.stop()}}),Nt)}var Ut=bt.mark(qt),Dt=bt.mark(Wt),Ft=bt.mark(Yt),Bt=function(e){return e.afParams};function qt(e){var t;return bt.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,pt(Bt);case 2:if((t=r.sent)&&t["auth-forms-change_password"]){r.next=5;break}return r.abrupt("return",null);case 5:return r.next=7,st(wt(E({},e,{method:"POST",auth:!0,url:t["auth-forms-change_password"].url})));case 7:case"end":return r.stop()}}),Ut)}function Wt(e){var t;return bt.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.response,!e.error){r.next=5;break}return t={password:e.error.message},r.next=5,st(i("auth-forms-change_password",t));case 5:case"end":return r.stop()}}),Dt)}function Yt(e){return bt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it([Et(P.CHANGE_PASSWORD+_,Wt),Et(P.CHANGE_PASSWORD,qt)]);case 2:case"end":return e.stop()}}),Ft)}var Kt=bt.mark(Qt),Xt=bt.mark($t),Vt=bt.mark(Jt),zt=function(e){return e.afParams};function Qt(e){var t;return bt.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,pt(zt);case 2:if(t=r.sent,console.log(t),t&&t["auth-forms-reset_password"]){r.next=6;break}return r.abrupt("return",null);case 6:return r.next=8,st(wt(E({},e,{method:"POST",auth:!0,url:t["auth-forms-reset_password"].url})));case 8:case"end":return r.stop()}}),Kt)}function $t(e){var t;return bt.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.error){r.next=4;break}return t={email:e.error.message},r.next=4,st(i("auth-forms-reset_password",t));case 4:case"end":return r.stop()}}),Xt)}function Jt(e){return bt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it([Et(N.RESET_PASSWORD+_,$t),Et(N.RESET_PASSWORD,Qt)]);case 2:case"end":return e.stop()}}),Vt)}var Zt=bt.mark(cr),er=bt.mark(ur),tr=bt.mark(lr),rr=bt.mark(pr),nr=bt.mark(fr),ar=bt.mark(dr),or=bt.mark(hr),sr=bt.mark(Er),ir=function(e){return e.afParams};function cr(e){var t;return bt.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,pt(ir);case 2:if(t=r.sent,console.log(t),t&&t["auth-forms-register"]){r.next=6;break}return r.abrupt("return",null);case 6:return r.next=8,st(wt(E({},e,{method:"POST",auth:!0,url:t["auth-forms-register"].url})));case 8:case"end":return r.stop()}}),Zt)}function ur(e){var t;return bt.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,pt(ir);case 2:if(t=r.sent,console.log(t),t&&t["auth-forms-register"]){r.next=6;break}return r.abrupt("return",null);case 6:return r.next=8,st(wt(E({},e,{method:"GET",auth:!0,url:"".concat(t["auth-forms-register"].checkEmailUrl,"/").concat(e.payload.email)})));case 8:case"end":return r.stop()}}),er)}function lr(e){var t;return bt.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,pt(ir);case 2:if(t=r.sent,console.log(t),t&&t["auth-forms-register"]){r.next=6;break}return r.abrupt("return",null);case 6:return r.next=8,st(wt(E({},e,{method:"GET",auth:!0,url:"".concat(t["auth-forms-register"].checkLoginUrl,"/").concat(e.payload.login)})));case 8:case"end":return r.stop()}}),tr)}function pr(e){var t;return bt.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.response,!e.error){r.next=5;break}return t={name:e.error.message},r.next=5,st(i("auth-forms-register",t));case 5:case"end":return r.stop()}}),rr)}function fr(e){var t;return bt.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t={name:e.response.error},r.next=3,st(i("auth-forms-register",t));case 3:case"end":return r.stop()}}),nr)}var mr=function(e){return c("register")(e)};function dr(e){var t,r;return bt.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.response,n.next=3,pt(mr);case 3:if(t=n.sent,!e.error){n.next=8;break}return r=E({name:e.error.message},t),n.next=8,st(i("auth-forms-register",r));case 8:case"end":return n.stop()}}),ar)}function hr(e){var t,r;return bt.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.response,n.next=3,pt(mr);case 3:if(t=n.sent,!e.error){n.next=8;break}return r=E({email:e.error.message},t),n.next=8,st(i("auth-forms-register",r));case 8:case"end":return n.stop()}}),or)}function Er(e){return bt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it([Et(k.REGISTER+_,fr),Et(k.REGISTER+S,pr),Et(k.REGISTER,cr),Et(k.CHECK_EMAIL+_,hr),Et(k.CHECK_EMAIL,ur),Et(k.CHECK_LOGIN+_,dr),Et(k.CHECK_LOGIN,lr)]);case 2:case"end":return e.stop()}}),sr)}var gr=bt.mark(yr),Tr=bt.mark(Ar),vr=bt.mark(wr);function yr(e){var t,r,n,a,o,s,i,c,u,l,p,f,m;return bt.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,console.log("sdfdsf");case 2:return t=e.payload,r=e.method,n=e.url,a=e.auth,o=e.oldType,e.token_is_active,d.next=5,pt((function(e){return e.afOrigin}));case 5:return s=d.sent,console.log(e),i="cef506b12fd189faf83b95c2af29d6c6",d.prev=8,d.next=11,st(E({},e,{type:o+w}));case 11:return c=t?JSON.stringify(t):"",u=new Headers({"Content-Type":"application/json"}),a&&u.set("Authorization","Bearer "+i),l={method:r,headers:u,mode:"cors"},c&&"GET"!==r&&(l.body=c),d.next=18,ut(fetch,s+n,l);case 18:return p=d.sent,d.next=21,p.json();case 21:if(f=d.sent,200===p.status&&(200!==p.status||100!==f.status)){d.next=28;break}return m=br(p,f),d.next=26,st(E({},e,{type:o+_,error:m}));case 26:d.next=30;break;case 28:return d.next=30,st(E({},e,{type:o+S,response:{data:f.response,error:100===f.status||2===f.messages[0].type?f.messages[0].message:null,status:f.status,message:0===f.status||0===f.messages[0].type?f.messages[0].message:null}}));case 30:d.next=35;break;case 32:d.prev=32,d.t0=d.catch(8),console.log(d.t0);case 35:case"end":return d.stop()}}),gr,null,[[8,32]])}var br=function(e,t){return 0===e.status?{message:"Unknow error: check your authorization. No 'Access-Control-Allow-Origin' header is present on the requested resource."}:500===e.status?t:t.messages?t.messages[0]:""};function Ar(){return bt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t="auth_token",r=void 0,r="localhost"===location.hostname?"localhost":"."+location.hostname,document.cookie=document.cookie="".concat(t,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=").concat(r),location.href=location.origin+"/auth/login";case 3:case"end":return e.stop()}var t,r}),Tr)}function wr(){return bt.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it([Et("LOGOUT",Ar),Et(At,yr),Ht(),Yt(),Jt(),Er()]);case 2:case"end":return e.stop()}}),vr)}var Sr=E({},R,{},O,{},x,{},L,{},C,{},M);export{Me as ChangePassword,Te as Login,we as ResetPassword,Le as SignUp,A as loginFormActions,Sr as reducer,wr as saga};
